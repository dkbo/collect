webpackJsonp([0],{196:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(593),s=a.a;t.default=s,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(s,"default","C:/Github/collect/src/page/searchApi/index.jsx")}()},430:function(e,t,n){"use strict";var a=n(41),s=n.n(a),i=n(68),r=n.n(i),_=n(69),o=n.n(_),c=n(72),u=n.n(c),l=n(71),p=n.n(l),h=n(70),m=n.n(h),f=n(3),g=n.n(f),E=n(195),d=n(73),T=n(432);n.n(T),n.d(t,"a",function(){return y});var y=function(e){function t(){var e,n,a,s;o()(this,t);for(var i=arguments.length,_=Array(i),c=0;c<i;c++)_[c]=arguments[c];return n=a=p()(this,(e=t.__proto__||r()(t)).call.apply(e,[this].concat(_))),a.state={message:""},a.getPlaceholder=function(){var e;return(e=a).__getPlaceholder__REACT_HOT_LOADER__.apply(e,arguments)},a.getUser=function(){var e;return(e=a).__getUser__REACT_HOT_LOADER__.apply(e,arguments)},a.setMessage=function(){var e;return(e=a).__setMessage__REACT_HOT_LOADER__.apply(e,arguments)},a.setGeoLocation=function(){var e;return(e=a).__setGeoLocation__REACT_HOT_LOADER__.apply(e,arguments)},a.SendMessage=function(){var e;return(e=a).__SendMessage__REACT_HOT_LOADER__.apply(e,arguments)},s=n,p()(a,s)}return m()(t,e),u()(t,[{key:"componentWillMount",value:function(){this.keyDownSubject=new Rx.Subject,this.changeSubject=new Rx.Subject,this.clickSubject=new Rx.Subject,this.keyDown=this.keyDownSubject.filter(function(e){return 13===e.keyCode}).throttleTime(1e3).do(this.SendMessage),this.change=this.changeSubject.do(this.setMessage),this.click=this.clickSubject.throttleTime(500).do(this.props.clearMessage),this.event=Rx.Observable.merge(this.change,this.keyDown,this.click).subscribe()}},{key:"componentWillUnmount",value:function(){this.event.unsubscribe()}},{key:"__getPlaceholder__REACT_HOT_LOADER__",value:function(){return this.__getPlaceholder__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getPlaceholder__REACT_HOT_LOADER__",value:function(){return this.getUser()?"留言":"登入後才可留言唷~"}},{key:"__getUser__REACT_HOT_LOADER__",value:function(){return this.__getUser__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getUser__REACT_HOT_LOADER__",value:function(){return firebase.chatAH.currentUser}},{key:"getGeoLocation",value:function(e,t){var n=this;E.a.getCurrentPosition(function(a){var i=[a.coords.latitude,a.coords.longitude],r=i[0],_=i[1];n.setGeoLocation(e,s()({},t,{lat:r,lng:_,uid:e}))})}},{key:"__setMessage__REACT_HOT_LOADER__",value:function(){return this.__setMessage__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__setMessage__REACT_HOT_LOADER__",value:function(e){return this.setState({message:e.target.value})}},{key:"__setGeoLocation__REACT_HOT_LOADER__",value:function(){return this.__setGeoLocation__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__setGeoLocation__REACT_HOT_LOADER__",value:function(e,t){firebase.geoDB.ref("geolocation/"+e).set(t).then(function(){})}},{key:"__SendMessage__REACT_HOT_LOADER__",value:function(){return this.__SendMessage__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__SendMessage__REACT_HOT_LOADER__",value:function(){var e=this,t=this.getUser();t?!function(){var n=e.state.message;n.trim("")&&!function(){var a=/(?:[?&]v=|\/embed\/|\/1\/|\/v\/|https:\/\/(?:www\.)?youtu\.be\/)([^&\n?#]+)/,s=n.match(a),i=t.uid,r=t.displayName,_=t.photoURL,o=firebase.database.ServerValue.TIMESTAMP,c=s?{uid:i,message:s[1],type:"youtube",timestamp:o}:{uid:i,message:n,timestamp:o};firebase.chatDB.ref("messages/").push(c).then(function(){c=s?{message:s[1],type:"youtube",timestamp:o,photoURL:_,displayName:r}:{message:n,timestamp:o,photoURL:_,displayName:r},e.getGeoLocation(i,c)}),e.setState({message:""})}()}():d.a.push("/auth")}},{key:"render",value:function(){var e=this;return g.a.createElement("div",{className:"control"},g.a.createElement("input",{className:"form-control",type:"text",value:this.state.message,placeholder:this.getPlaceholder(),onChange:function(t){return e.changeSubject.next(t)},onKeyDown:function(t){return e.keyDownSubject.next(t)}}),g.a.createElement("button",{className:"btn",type:"button",title:"發送",onClick:this.SendMessage},g.a.createElement("i",{className:"fa fa-paper-plane"})),g.a.createElement("button",{className:"btn",type:"button",title:"清除",onClick:function(t){return e.clickSubject.next(t)}},g.a.createElement("i",{className:"fa fa-eraser"})))}}]),t}(f.Component);y.propTypes={clearMessage:f.PropTypes.func},function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(y,"Control","C:/Github/collect/src/components/miniChat/components/control.jsx")}()},431:function(e,t,n){"use strict";var a=n(68),s=n.n(a),i=n(69),r=n.n(i),_=n(72),o=n.n(_),c=n(71),u=n.n(c),l=n(70),p=n.n(l),h=n(3),m=n.n(h),f=n(433);n.n(f),n.d(t,"a",function(){return g});var g=function(e){function t(){var e,n,a,i;r()(this,t);for(var _=arguments.length,o=Array(_),c=0;c<_;c++)o[c]=arguments[c];return n=a=u()(this,(e=t.__proto__||s()(t)).call.apply(e,[this].concat(o))),a.state={opacity:0},a.getMessage=function(){var e;return(e=a).__getMessage__REACT_HOT_LOADER__.apply(e,arguments)},a.getMessageContent=function(){var e;return(e=a).__getMessageContent__REACT_HOT_LOADER__.apply(e,arguments)},a.transVideo=function(){var e;return(e=a).__transVideo__REACT_HOT_LOADER__.apply(e,arguments)},i=n,u()(a,i)}return p()(t,e),o()(t,[{key:"componentWillMount",value:function(){var e=this,t=new Image;t.onload=function(){e.setState({opacity:1})},t.onerror=function(t){console.log(t),e.setState({opacity:1})},t.src=this.props.photoURL}},{key:"__getMessage__REACT_HOT_LOADER__",value:function(){return this.__getMessage__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getMessage__REACT_HOT_LOADER__",value:function(){return this.props.type?this.transVideo():this.props.message}},{key:"__getMessageContent__REACT_HOT_LOADER__",value:function(){return this.__getMessageContent__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getMessageContent__REACT_HOT_LOADER__",value:function(){return this.props.type?"messageVideo embed-responsive embed-responsive-16by9":"messagesContent rounded"}},{key:"__transVideo__REACT_HOT_LOADER__",value:function(){return this.__transVideo__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__transVideo__REACT_HOT_LOADER__",value:function(){switch(this.props.type){case"youtube":return m.a.createElement("iframe",{className:"embed-responsive-item",src:"https://www.youtube.com/embed/"+this.props.message,frameBorder:"0",allowFullScreen:!0});default:return this.props.message}}},{key:"render",value:function(){return m.a.createElement("li",{className:this.props.className,style:{opacity:this.state.opacity}},m.a.createElement("figure",null,m.a.createElement("img",{src:this.props.photoURL,alt:this.props.displayName})),m.a.createElement("div",{className:"messagesBox"},m.a.createElement("div",{className:"messagesName"},m.a.createElement("b",null,this.props.displayName)),m.a.createElement("div",{className:this.getMessageContent()},this.getMessage()),m.a.createElement("div",{className:"clearfix"})))}}]),t}(h.Component);g.propTypes={className:h.PropTypes.string.isRequired,displayName:h.PropTypes.string.isRequired,photoURL:h.PropTypes.string.isRequired,message:h.PropTypes.string.isRequired,type:h.PropTypes.any},function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(g,"Messages","C:/Github/collect/src/components/miniChat/components/messages.jsx")}()},432:function(e,t){},433:function(e,t){},434:function(e,t,n){"use strict";var a=n(435),s=a.a;t.a=s,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(s,"default","C:/Github/collect/src/components/miniChat/index.jsx")}()},435:function(e,t,n){"use strict";var a=n(68),s=n.n(a),i=n(69),r=n.n(i),_=n(72),o=n.n(_),c=n(71),u=n.n(c),l=n(70),p=n.n(l),h=n(3),m=n.n(h),f=n(431),g=n(430),E=n(437);n.n(E),n.d(t,"a",function(){return d});var d=function(e){function t(){var e,n,a,i;r()(this,t);for(var _=arguments.length,o=Array(_),c=0;c<_;c++)o[c]=arguments[c];return n=a=u()(this,(e=t.__proto__||s()(t)).call.apply(e,[this].concat(o))),a.getUser=function(){var e;return(e=a).__getUser__REACT_HOT_LOADER__.apply(e,arguments)},a.handleClick=function(){var e;return(e=a).__handleClick__REACT_HOT_LOADER__.apply(e,arguments)},i=n,u()(a,i)}return p()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.refs.messageBlock.scrollTop=this.refs.messageBlockUl.clientHeight}},{key:"shouldComponentUpdate",value:function(e,t){return e.chat!==this.props.chat||e.miniChat!==this.props.miniChat||this.state!==t}},{key:"componentDidUpdate",value:function(){this.refs.messageBlock.scrollTop=this.refs.messageBlockUl.clientHeight}},{key:"componentWillUnmount",value:function(){firebase.chatDB.ref(".info/connected").off("value",this.connected),firebase.chatDB.ref("members").off("child_changed",this.userOnlineLog)}},{key:"__getUser__REACT_HOT_LOADER__",value:function(){return this.__getUser__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getUser__REACT_HOT_LOADER__",value:function(){return firebase.chatAH.currentUser}},{key:"__handleClick__REACT_HOT_LOADER__",value:function(){return this.__handleClick__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__handleClick__REACT_HOT_LOADER__",value:function(){this.props.toggleMinichat(this.props.chat.size)}},{key:"render",value:function(){var e=this.getUser()?this.getUser():{uid:null},t=this.props.miniChat.get("isShow"),n=this.props.chat.size-this.props.miniChat.get("count");return m.a.createElement("div",{id:"miniChat",style:this.props.miniChatStyle,className:t?"active":""},m.a.createElement("div",{id:"miniChatBox",className:"card"},m.a.createElement("button",{className:"card-header",ref:"miniChatHeader",onClick:this.handleClick},m.a.createElement("b",null,"多人聊天窗口",!t&&n?m.a.createElement("span",{className:"tag tag-danger"},n):null)),m.a.createElement("div",{className:"card-block",ref:"messageBlock"},m.a.createElement("ul",{ref:"messageBlockUl"},this.props.chat.map(function(t){return m.a.createElement(f.a,{key:t.timestamp,className:t.uid===e.uid?"clearfix messagesSelf":"clearfix messagesOther",photoURL:t.photoURL,displayName:t.displayName,message:t.message,type:t.type})})))),m.a.createElement(g.a,{clearMessage:this.props.clearMessage}))}}]),t}(h.Component);d.propTypes={chat:h.PropTypes.object.isRequired,clearMessage:h.PropTypes.func,toggleMinichat:h.PropTypes.func,miniChat:h.PropTypes.object.isRequired,miniChatStyle:h.PropTypes.object},function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(d,"Chat","C:/Github/collect/src/components/miniChat/miniChat.jsx")}()},437:function(e,t){},590:function(e,t,n){"use strict";var a=n(3),s=n.n(a),i=n(619),r=(n.n(i),function(e){return e.map(function(e){return s.a.createElement("li",{key:e.full_name},s.a.createElement("a",{href:e.html_url,target:"_blank",rel:"noopener noreferrer"},e.name),s.a.createElement("div",null,e.description))})}),_=function(e){var t=e.showList;return s.a.createElement("div",{className:t.github.length>0?"col col-md-6 opacity":"col col-md-6"},t.github.length>0?s.a.createElement("div",null,s.a.createElement("i",{className:"fa fa-github fa-5x"})):null,s.a.createElement("ul",{id:"githubList"},t.github.length>0?r(t.github):null))};_.propTypes={showList:a.PropTypes.object};var o=_;t.a=o,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"renderGithubList","C:/Github/collect/src/page/searchApi/components/githubList.jsx"),__REACT_HOT_LOADER__.register(_,"GithubList","C:/Github/collect/src/page/searchApi/components/githubList.jsx"),__REACT_HOT_LOADER__.register(o,"default","C:/Github/collect/src/page/searchApi/components/githubList.jsx"))}()},591:function(e,t,n){"use strict";var a=n(68),s=n.n(a),i=n(69),r=n.n(i),_=n(72),o=n.n(_),c=n(71),u=n.n(c),l=n(70),p=n.n(l),h=n(3),m=n.n(h),f=n(73),g=n(620);n.n(g),n.d(t,"a",function(){return E});var E=function(e){function t(){var e,n,a,i;r()(this,t);for(var _=arguments.length,o=Array(_),c=0;c<_;c++)o[c]=arguments[c];return n=a=u()(this,(e=t.__proto__||s()(t)).call.apply(e,[this].concat(o))),a.getDefaultValue=function(){var e;return(e=a).__getDefaultValue__REACT_HOT_LOADER__.apply(e,arguments)},i=n,u()(a,i)}return p()(t,e),o()(t,[{key:"componentWillMount",value:function(){this.changeSubject=new Rx.Subject;var e=this.changeSubject.filter(function(e){return e.trim()}).debounceTime(500).do(function(e){return f.a.push("/search/"+e)}).share();this.wikiSearch=e.subscribe(this.props.searchWikiKeyword),this.githubSearch=e.subscribe(this.props.searchGithubKeyword)}},{key:"componentDidMount",value:function(){var e=this.props.router.params.keyword;e&&this.changeSubject.next(e)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillUnmount",value:function(){this.wikiSearch.unsubscribe(),this.githubSearch.unsubscribe()}},{key:"__getDefaultValue__REACT_HOT_LOADER__",value:function(){return this.__getDefaultValue__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getDefaultValue__REACT_HOT_LOADER__",value:function(){return this.props.router.params.keyword?this.props.router.params.keyword:this.props.showList.wiki?this.props.showList.wiki[0]:""}},{key:"render",value:function(){var e=this;return m.a.createElement("div",{id:"search"},m.a.createElement("label",{id:"search-icon",htmlFor:"search-input"},m.a.createElement("i",{className:"fa fa-search"})),m.a.createElement("input",{type:"search",id:"search-input",defaultValue:this.getDefaultValue(),onChange:function(t){return e.changeSubject.next(t.target.value)},autoComplete:"off",placeholder:"搜尋關鍵字"}))}}]),t}(h.Component);E.propTypes={searchWikiKeyword:h.PropTypes.func,searchGithubKeyword:h.PropTypes.func,showList:h.PropTypes.object,router:h.PropTypes.object},function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(E,"Search","C:/Github/collect/src/page/searchApi/components/search.jsx")}()},592:function(e,t,n){"use strict";var a=n(3),s=n.n(a),i=n(621),r=(n.n(i),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=arguments[2];return e.map(function(e,a){return s.a.createElement("li",{key:e},s.a.createElement("a",{href:n[a],target:"_blank",rel:"noopener noreferrer"},e),s.a.createElement("div",null,t[a]))})}),_=function(e){var t=e.showList;return s.a.createElement("div",{className:t.wiki[1].length>0?"col col-md-6 opacity":"col col-md-6"},t.wiki[1].length>0?s.a.createElement("div",null,s.a.createElement("i",{className:"fa fa-wikipedia-w fa-5x"})):null,s.a.createElement("ul",{id:"wikiList"},t.wiki[1].length>0?r(t.wiki[1],t.wiki[2],t.wiki[3]):null))};_.propTypes={showList:a.PropTypes.object};var o=_;t.a=o,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"renderwikiList","C:/Github/collect/src/page/searchApi/components/wikiList.jsx"),__REACT_HOT_LOADER__.register(_,"WikiList","C:/Github/collect/src/page/searchApi/components/wikiList.jsx"),__REACT_HOT_LOADER__.register(o,"default","C:/Github/collect/src/page/searchApi/components/wikiList.jsx"))}()},593:function(e,t,n){"use strict";var a=n(41),s=n.n(a),i=n(3),r=n.n(i),_=n(591),o=n(592),c=n(590),u=n(434),l=n(622),p=(n.n(l),function(e){return r.a.createElement("div",{className:"container",id:"searchApi"},r.a.createElement(_.a,e),r.a.createElement(c.a,e),r.a.createElement(o.a,e),r.a.createElement(u.a,s()({},e,{miniChatStyle:{left:0}})))}),h=p;t.a=h,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(p,"SearchApi","C:/Github/collect/src/page/searchApi/searchApi.jsx"),__REACT_HOT_LOADER__.register(h,"default","C:/Github/collect/src/page/searchApi/searchApi.jsx"))}()},619:function(e,t){},620:function(e,t){},621:function(e,t){},622:function(e,t){}});