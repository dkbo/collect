webpackJsonp([4],{428:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(589),a=s.a;t.default=a,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(a,"default","C:/Github/collect/src/page/rpg/index.jsx")}()},430:function(e,t,n){"use strict";var s=n(41),a=n.n(s),i=n(68),_=n.n(i),r=n(69),o=n.n(r),c=n(72),p=n.n(c),h=n(71),u=n.n(h),l=n(70),y=n.n(l),m=n(3),d=n.n(m),E=n(195),f=n(73),T=n(432);n.n(T),n.d(t,"a",function(){return g});var g=function(e){function t(){var e,n,s,a;o()(this,t);for(var i=arguments.length,r=Array(i),c=0;c<i;c++)r[c]=arguments[c];return n=s=u()(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(r))),s.state={message:""},s.getPlaceholder=function(){var e;return(e=s).__getPlaceholder__REACT_HOT_LOADER__.apply(e,arguments)},s.getUser=function(){var e;return(e=s).__getUser__REACT_HOT_LOADER__.apply(e,arguments)},s.setMessage=function(){var e;return(e=s).__setMessage__REACT_HOT_LOADER__.apply(e,arguments)},s.setGeoLocation=function(){var e;return(e=s).__setGeoLocation__REACT_HOT_LOADER__.apply(e,arguments)},s.SendMessage=function(){var e;return(e=s).__SendMessage__REACT_HOT_LOADER__.apply(e,arguments)},a=n,u()(s,a)}return y()(t,e),p()(t,[{key:"componentWillMount",value:function(){this.keyDownSubject=new Rx.Subject,this.changeSubject=new Rx.Subject,this.clickSubject=new Rx.Subject,this.keyDown=this.keyDownSubject.filter(function(e){return 13===e.keyCode}).throttleTime(1e3).do(this.SendMessage),this.change=this.changeSubject.do(this.setMessage),this.click=this.clickSubject.throttleTime(500).do(this.props.clearMessage),this.event=Rx.Observable.merge(this.change,this.keyDown,this.click).subscribe()}},{key:"componentWillUnmount",value:function(){this.event.unsubscribe()}},{key:"__getPlaceholder__REACT_HOT_LOADER__",value:function(){return this.__getPlaceholder__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getPlaceholder__REACT_HOT_LOADER__",value:function(){return this.getUser()?"留言":"登入後才可留言唷~"}},{key:"__getUser__REACT_HOT_LOADER__",value:function(){return this.__getUser__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getUser__REACT_HOT_LOADER__",value:function(){return firebase.chatAH.currentUser}},{key:"getGeoLocation",value:function(e,t){var n=this;E.a.getCurrentPosition(function(s){var i=[s.coords.latitude,s.coords.longitude],_=i[0],r=i[1];n.setGeoLocation(e,a()({},t,{lat:_,lng:r,uid:e}))})}},{key:"__setMessage__REACT_HOT_LOADER__",value:function(){return this.__setMessage__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__setMessage__REACT_HOT_LOADER__",value:function(e){return this.setState({message:e.target.value})}},{key:"__setGeoLocation__REACT_HOT_LOADER__",value:function(){return this.__setGeoLocation__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__setGeoLocation__REACT_HOT_LOADER__",value:function(e,t){firebase.geoDB.ref("geolocation/"+e).set(t).then(function(){})}},{key:"__SendMessage__REACT_HOT_LOADER__",value:function(){return this.__SendMessage__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__SendMessage__REACT_HOT_LOADER__",value:function(){var e=this,t=this.getUser();t?!function(){var n=e.state.message;n.trim("")&&!function(){var s=/(?:[?&]v=|\/embed\/|\/1\/|\/v\/|https:\/\/(?:www\.)?youtu\.be\/)([^&\n?#]+)/,a=n.match(s),i=t.uid,_=t.displayName,r=t.photoURL,o=firebase.database.ServerValue.TIMESTAMP,c=a?{uid:i,message:a[1],type:"youtube",timestamp:o}:{uid:i,message:n,timestamp:o};firebase.chatDB.ref("messages/").push(c).then(function(){c=a?{message:a[1],type:"youtube",timestamp:o,photoURL:r,displayName:_}:{message:n,timestamp:o,photoURL:r,displayName:_},e.getGeoLocation(i,c)}),e.setState({message:""})}()}():f.a.push("/auth")}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"control"},d.a.createElement("input",{className:"form-control",type:"text",value:this.state.message,placeholder:this.getPlaceholder(),onChange:function(t){return e.changeSubject.next(t)},onKeyDown:function(t){return e.keyDownSubject.next(t)}}),d.a.createElement("button",{className:"btn",type:"button",title:"發送",onClick:this.SendMessage},d.a.createElement("i",{className:"fa fa-paper-plane"})),d.a.createElement("button",{className:"btn",type:"button",title:"清除",onClick:function(t){return e.clickSubject.next(t)}},d.a.createElement("i",{className:"fa fa-eraser"})))}}]),t}(m.Component);g.propTypes={clearMessage:m.PropTypes.func},function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(g,"Control","C:/Github/collect/src/components/miniChat/components/control.jsx")}()},431:function(e,t,n){"use strict";var s=n(68),a=n.n(s),i=n(69),_=n.n(i),r=n(72),o=n.n(r),c=n(71),p=n.n(c),h=n(70),u=n.n(h),l=n(3),y=n.n(l),m=n(433);n.n(m),n.d(t,"a",function(){return d});var d=function(e){function t(){var e,n,s,i;_()(this,t);for(var r=arguments.length,o=Array(r),c=0;c<r;c++)o[c]=arguments[c];return n=s=p()(this,(e=t.__proto__||a()(t)).call.apply(e,[this].concat(o))),s.state={opacity:0},s.getMessage=function(){var e;return(e=s).__getMessage__REACT_HOT_LOADER__.apply(e,arguments)},s.getMessageContent=function(){var e;return(e=s).__getMessageContent__REACT_HOT_LOADER__.apply(e,arguments)},s.transVideo=function(){var e;return(e=s).__transVideo__REACT_HOT_LOADER__.apply(e,arguments)},i=n,p()(s,i)}return u()(t,e),o()(t,[{key:"componentWillMount",value:function(){var e=this,t=new Image;t.onload=function(){e.setState({opacity:1})},t.onerror=function(t){console.log(t),e.setState({opacity:1})},t.src=this.props.photoURL}},{key:"__getMessage__REACT_HOT_LOADER__",value:function(){return this.__getMessage__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getMessage__REACT_HOT_LOADER__",value:function(){return this.props.type?this.transVideo():this.props.message}},{key:"__getMessageContent__REACT_HOT_LOADER__",value:function(){return this.__getMessageContent__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getMessageContent__REACT_HOT_LOADER__",value:function(){return this.props.type?"messageVideo embed-responsive embed-responsive-16by9":"messagesContent rounded"}},{key:"__transVideo__REACT_HOT_LOADER__",value:function(){return this.__transVideo__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__transVideo__REACT_HOT_LOADER__",value:function(){switch(this.props.type){case"youtube":return y.a.createElement("iframe",{className:"embed-responsive-item",src:"https://www.youtube.com/embed/"+this.props.message,frameBorder:"0",allowFullScreen:!0});default:return this.props.message}}},{key:"render",value:function(){return y.a.createElement("li",{className:this.props.className,style:{opacity:this.state.opacity}},y.a.createElement("figure",null,y.a.createElement("img",{src:this.props.photoURL,alt:this.props.displayName})),y.a.createElement("div",{className:"messagesBox"},y.a.createElement("div",{className:"messagesName"},y.a.createElement("b",null,this.props.displayName)),y.a.createElement("div",{className:this.getMessageContent()},this.getMessage()),y.a.createElement("div",{className:"clearfix"})))}}]),t}(l.Component);d.propTypes={className:l.PropTypes.string.isRequired,displayName:l.PropTypes.string.isRequired,photoURL:l.PropTypes.string.isRequired,message:l.PropTypes.string.isRequired,type:l.PropTypes.any},function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(d,"Messages","C:/Github/collect/src/components/miniChat/components/messages.jsx")}()},432:function(e,t){},433:function(e,t){},434:function(e,t,n){"use strict";var s=n(435),a=s.a;t.a=a,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(a,"default","C:/Github/collect/src/components/miniChat/index.jsx")}()},435:function(e,t,n){"use strict";var s=n(68),a=n.n(s),i=n(69),_=n.n(i),r=n(72),o=n.n(r),c=n(71),p=n.n(c),h=n(70),u=n.n(h),l=n(3),y=n.n(l),m=n(431),d=n(430),E=n(437);n.n(E),n.d(t,"a",function(){return f});var f=function(e){function t(){var e,n,s,i;_()(this,t);for(var r=arguments.length,o=Array(r),c=0;c<r;c++)o[c]=arguments[c];return n=s=p()(this,(e=t.__proto__||a()(t)).call.apply(e,[this].concat(o))),s.getUser=function(){var e;return(e=s).__getUser__REACT_HOT_LOADER__.apply(e,arguments)},s.handleClick=function(){var e;return(e=s).__handleClick__REACT_HOT_LOADER__.apply(e,arguments)},i=n,p()(s,i)}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.refs.messageBlock.scrollTop=this.refs.messageBlockUl.clientHeight}},{key:"shouldComponentUpdate",value:function(e,t){return e.chat!==this.props.chat||e.miniChat!==this.props.miniChat||this.state!==t}},{key:"componentDidUpdate",value:function(){this.refs.messageBlock.scrollTop=this.refs.messageBlockUl.clientHeight}},{key:"componentWillUnmount",value:function(){firebase.chatDB.ref(".info/connected").off("value",this.connected),firebase.chatDB.ref("members").off("child_changed",this.userOnlineLog)}},{key:"__getUser__REACT_HOT_LOADER__",value:function(){return this.__getUser__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getUser__REACT_HOT_LOADER__",value:function(){return firebase.chatAH.currentUser}},{key:"__handleClick__REACT_HOT_LOADER__",value:function(){return this.__handleClick__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__handleClick__REACT_HOT_LOADER__",value:function(){this.props.toggleMinichat(this.props.chat.size)}},{key:"render",value:function(){var e=this.getUser()?this.getUser():{uid:null},t=this.props.miniChat.get("isShow"),n=this.props.chat.size-this.props.miniChat.get("count");return y.a.createElement("div",{id:"miniChat",style:this.props.miniChatStyle,className:t?"active":""},y.a.createElement("div",{id:"miniChatBox",className:"card"},y.a.createElement("button",{className:"card-header",ref:"miniChatHeader",onClick:this.handleClick},y.a.createElement("b",null,"多人聊天窗口",!t&&n?y.a.createElement("span",{className:"tag tag-danger"},n):null)),y.a.createElement("div",{className:"card-block",ref:"messageBlock"},y.a.createElement("ul",{ref:"messageBlockUl"},this.props.chat.map(function(t){return y.a.createElement(m.a,{key:t.timestamp,className:t.uid===e.uid?"clearfix messagesSelf":"clearfix messagesOther",photoURL:t.photoURL,displayName:t.displayName,message:t.message,type:t.type})})))),y.a.createElement(d.a,{clearMessage:this.props.clearMessage}))}}]),t}(l.Component);f.propTypes={chat:l.PropTypes.object.isRequired,clearMessage:l.PropTypes.func,toggleMinichat:l.PropTypes.func,miniChat:l.PropTypes.object.isRequired,miniChatStyle:l.PropTypes.object},function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(f,"Chat","C:/Github/collect/src/components/miniChat/miniChat.jsx")}()},437:function(e,t){},440:function(e,t,n){"use strict";var s=n(554),a=n(555),i=n(556),_=n(557),r=[s.a,a.a,i.a,_.a],o=r;t.a=o,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"isMoveObject","C:/Github/collect/src/constants/ismove/index.jsx"),__REACT_HOT_LOADER__.register(o,"default","C:/Github/collect/src/constants/ismove/index.jsx"))}()},552:function(e,t,n){"use strict";var s=n(553),a=s.a;t.a=a,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(a,"default","C:/Github/collect/src/components/loading/index.jsx")}()},553:function(e,t,n){"use strict";var s=n(68),a=n.n(s),i=n(69),_=n.n(i),r=n(72),o=n.n(r),c=n(71),p=n.n(c),h=n(70),u=n.n(h),l=n(3),y=n.n(l),m=n(598);n.n(m),n.d(t,"a",function(){return d});var d=function(e){function t(){return _()(this,t),p()(this,(t.__proto__||a()(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return y.a.createElement("div",{id:"loadBox"},y.a.createElement("div",{className:"loader"},y.a.createElement("div",{className:"loader-overlay"}),y.a.createElement("div",{className:"loader-cogs"},y.a.createElement("div",{className:"loader-cogs-top"},y.a.createElement("div",{className:"top-part"}),y.a.createElement("div",{className:"top-part"}),y.a.createElement("div",{className:"top-part"}),y.a.createElement("div",{className:"top-hole"})),y.a.createElement("div",{className:"loader-cogs-left"},y.a.createElement("div",{className:"left-part"}),y.a.createElement("div",{className:"left-part"}),y.a.createElement("div",{className:"left-part"}),y.a.createElement("div",{className:"left-hole"})),y.a.createElement("div",{className:"loader-cogs-bottom"},y.a.createElement("div",{className:"bottom-part"}),y.a.createElement("div",{className:"bottom-part"}),y.a.createElement("div",{className:"bottom-part"}),y.a.createElement("div",{className:"bottom-hole"})),y.a.createElement("p",null,this.props.loadText))))}}]),t}(l.Component);d.propTypes={loadText:l.PropTypes.string},function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(d,"Loading","C:/Github/collect/src/components/loading/loading.jsx")}()},554:function(e,t,n){"use strict";var s=n(879),a=n.n(s),i=n(880),_=n.n(i),r={map:{index:0,name:"大地圖",first:a.a,second:_.a,width:1920,height:1280,in:[{x:472,y:544},{x:1344,y:512},{x:744,y:40},{x:20,y:1200}]},isMove:[{n:"largetree",x:896,y:392,w:64,h:64},{n:"stone",x:980,y:512,w:64,h:1,e:2},{n:"house",x:384,y:352,w:224,h:160},{n:"house",x:384,y:352,w:224,h:128},{n:"housedoor",x:504,y:480,w:1,h:32,cm:1,cmm:0},{n:"wood",x:508,y:524,w:64,h:18},{n:"fence",x:409,y:656,w:309,h:1},{n:"fence",x:788,y:656,w:243,h:1},{n:"fence",x:409,y:880,w:621,h:1},{n:"fence",x:409,y:656,w:4,h:224},{n:"fence",x:1028,y:656,w:4,h:224},{n:"bogy",x:578,y:760,w:32,h:1,e:0},{n:"man",x:810,y:518,w:32,h:1,e:1},{n:"水池",x:864,y:768,w:64,h:1},{n:"紅屋",x:1312,y:288,w:448,h:128},{n:"紅屋",x:1312,y:448,w:160,h:32},{n:"紅屋",x:1316,y:512,w:24,h:1},{n:"紅屋",x:1424,y:512,w:32,h:1},{n:"紅屋",x:1536,y:506,w:64,h:6},{n:"紅屋",x:1664,y:506,w:64,h:6},{n:"紅屋",x:1344,y:480,w:12,h:1,cm:2,cmm:0},{n:"柵欄",x:1230,y:170,w:610,h:1},{n:"柵欄",x:1230,y:608,w:76,h:1},{n:"柵欄",x:1408,y:608,w:434,h:1},{n:"柵欄",x:1230,y:170,w:1,h:416},{n:"柵欄",x:1840,y:170,w:1,h:416},{x:1503,y:1120,w:66,h:1},{x:1697,y:1088,w:63,h:1},{x:1312,y:1088,w:65,h:1},{x:960,y:1088,w:65,h:1},{x:766,y:1120,w:67,h:1},{x:1122,y:1120,w:62,h:1},{x:416,y:1120,w:63,h:1},{x:577,y:1088,w:63,h:1},{x:1,y:1088,w:222,h:0},{x:217,y:300,w:6,h:726},{x:130,y:1034,w:60,h:8},{x:98,y:1024,w:28,h:1},{x:194,y:1024,w:28,h:1},{x:88,y:14,w:8,h:1013},{x:1,y:1003,w:87,h:6},{x:314,y:204,w:387,h:20},{x:800,y:204,w:63,h:21},{x:94,y:12,w:577,h:18},{x:862,y:15,w:1059,h:17},{x:857,y:32,w:5,h:180},{x:7,y:1084,w:216,h:2},{x:223,y:322,w:96,h:3},{x:310,y:216,w:9,h:106},{x:799,y:253,w:0,h:21},{x:797,y:205,w:2,h:38},{x:702,y:205,w:4,h:38},{x:680,y:2,w:173,h:3},{x:5,y:1126,w:1,h:152}],npc:[{b:"http://dkbo.github.io/images/man.png",type:4,pX:1550,pY:800,aX:1152,aY:672,aW:600,aH:240,mX:50,mY:50,x:0,y:0,w:32,h:48,d:0,l:1,r:2,u:3,t:0,s:0,f:0,footSpeed:8,isR:!1,isU:!1,isD:!1,isL:!1,isM:!1,e:3}]},o=r;t.a=o,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"ISMOVE_0000","C:/Github/collect/src/constants/ismove/isMove_0000.jsx"),__REACT_HOT_LOADER__.register(o,"default","C:/Github/collect/src/constants/ismove/isMove_0000.jsx"))}()},555:function(e,t,n){"use strict";var s=n(881),a=n.n(s),i=n(882),_=n.n(i),r={map:{index:1,name:"花草屋",first:a.a,second:_.a,width:960,height:640,in:[{x:472,y:580}]},isMove:[{n:"man",x:480,y:352,w:32,h:0,e:0},{n:"牆",x:448,y:640,w:64,h:0,cm:0,cmm:0},{n:"牆",x:32,y:0,w:0,h:640},{n:"牆",x:928,y:0,w:0,h:640},{n:"牆",x:32,y:32,w:928,h:0},{n:"牆",x:32,y:608,w:416,h:0},{n:"牆",x:512,y:608,w:416,h:0},{n:"花",x:128,y:64,w:32,h:0},{n:"花",x:128,y:224,w:32,h:0},{n:"花",x:128,y:384,w:32,h:0},{n:"花",x:800,y:64,w:32,h:0},{n:"花",x:800,y:224,w:32,h:0},{n:"花",x:800,y:384,w:32,h:0},{n:"石碑",x:224,y:160,w:32,h:0},{n:"石碑",x:224,y:320,w:32,h:0},{n:"石碑",x:704,y:160,w:32,h:0},{n:"石碑",x:704,y:320,w:32,h:0}],npc:[{b:"http://dkbo.github.io/images/man.png",type:0,pX:650,pY:500,aX:512,aY:416,aW:350,aH:140,mX:0,mY:0,x:0,y:0,w:32,h:48,d:0,l:1,r:2,u:3,t:0,s:0,f:0,footSpeed:8,isR:!1,isU:!1,isD:!1,isL:!1,isM:!1,e:1}]},o=r;t.a=o,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"ISMOVE_0001","C:/Github/collect/src/constants/ismove/isMove_0001.jsx"),__REACT_HOT_LOADER__.register(o,"default","C:/Github/collect/src/constants/ismove/isMove_0001.jsx"))}()},556:function(e,t,n){"use strict";var s=n(883),a=n.n(s),i=n(884),_=n.n(i),r={map:{index:2,name:"房屋(1F)",first:a.a,second:_.a,width:1440,height:960,in:[{x:48,y:896},{x:720,y:96}]},isMove:[{n:"雕像",x:33,y:93,w:32,h:3},{n:"雕像",x:642,y:94,w:28,h:3},{n:"鋼琴",x:309,y:185,w:55,h:5},{n:"桌子",x:133,y:320,w:86,h:22},{n:"桌子",x:454,y:320,w:84,h:22},{n:"牆壁",x:32,y:60,w:640,h:2},{n:"牆壁",x:128,y:734,w:2,h:223},{n:"牆壁",x:131,y:730,w:1276,h:4},{n:"牆壁",x:1406,y:349,w:3,h:380},{n:"牆壁",x:1119,y:352,w:289,h:32},{n:"牆壁",x:768,y:352,w:287,h:32},{n:"牆壁",x:800,y:58,w:607,h:6},{n:"牆壁",x:767,y:0,w:3,h:351},{n:"牆壁",x:703,y:5,w:2,h:379},{n:"牆壁",x:703,y:383,w:3,h:195},{n:"牆壁",x:353,y:544,w:340,h:32},{n:"牆壁",x:32,y:544,w:255,h:32},{n:"牆壁",x:30,y:62,w:1,h:895},{n:"牆壁",x:672,y:61,w:4,h:451},{n:"樓梯",x:713,y:6,w:45,h:7,cm:3,cmm:0},{n:"人",x:813,y:510,w:26,h:4,e:0},{n:"牆壁",x:795,y:60,w:6,h:257},{n:"牆壁",x:1408,y:60,w:2,h:261},{n:"櫥櫃",x:801,y:93,w:609,h:2},{n:"櫥櫃",x:800,y:192,w:128,h:1},{n:"櫥櫃",x:992,y:192,w:128,h:1},{n:"櫥櫃",x:1184,y:192,w:128,h:1},{n:"櫥櫃",x:800,y:288,w:128,h:1},{n:"櫥櫃",x:992,y:288,w:128,h:1},{n:"櫥櫃",x:1184,y:288,w:128,h:1},{n:"門口",x:38,y:952,w:78,h:7,cm:0,cmm:1}],npc:[{b:"http://dkbo.github.io/images/man.png",type:0,pX:128,pY:224,aX:64,aY:128,aW:188,aH:128,mX:0,mY:0,x:0,y:0,w:32,h:48,d:0,l:1,r:2,u:3,t:0,s:0,f:0,footSpeed:8,isR:!1,isU:!1,isD:!1,isL:!1,isM:!1,e:1},{b:"http://dkbo.github.io/images/man.png",type:0,pX:504,pY:224,aX:384,aY:128,aW:224,aH:128,mX:0,mY:0,x:0,y:0,w:32,h:48,d:0,l:1,r:2,u:3,t:0,s:0,f:0,footSpeed:8,isR:!1,isU:!1,isD:!1,isL:!1,isM:!1,e:2},{b:"http://dkbo.github.io/images/man.png",type:0,pX:428,pY:424,aX:64,aY:352,aW:564,aH:128,mX:0,mY:0,x:0,y:0,w:32,h:48,d:0,l:1,r:2,u:3,t:0,s:0,f:0,footSpeed:8,isR:!1,isU:!1,isD:!1,isL:!1,isM:!1,e:3}]},o=r;t.a=o,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"ISMOVE_0002","C:/Github/collect/src/constants/ismove/isMove_0002.jsx"),__REACT_HOT_LOADER__.register(o,"default","C:/Github/collect/src/constants/ismove/isMove_0002.jsx"))}()},557:function(e,t,n){"use strict";var s=n(885),a=n.n(s),i=n(886),_=n.n(i),r={map:{index:3,name:"房屋(2F)",first:a.a,second:_.a,width:1440,height:960,in:[{x:672,y:160}]},isMove:[{n:"牆壁",x:1120,y:352,w:289,h:32},{n:"牆壁",x:768,y:352,w:288,h:32},{n:"牆壁",x:800,y:64,w:607,h:1},{n:"牆壁",x:800,y:64,w:1,h:257},{n:"牆壁",x:1408,y:60,w:2,h:261},{x:0,y:0,w:0,h:0},{x:0,y:0,w:0,h:0},{x:33,y:64,w:447,h:1},{x:32,y:63,w:1,h:883},{x:32,y:352,w:449,h:33},{x:800,y:512,w:256,h:32},{x:1120,y:512,w:288,h:33},{x:800,y:541,w:2,h:162},{x:1406,y:545,w:2,h:160},{x:0,y:0,w:0,h:0},{x:125,y:733,w:3,h:166},{x:32,y:894,w:94,h:1},{x:768,y:512,w:3,h:223},{x:125,y:730,w:1310,h:5},{x:480,y:384,w:1,h:256},{x:0,y:0,w:0,h:0},{x:512,y:64,w:1,h:192},{x:768,y:64,w:2,h:227},{x:608,y:288,w:159,h:32},{x:480,y:64,w:2,h:192},{x:512,y:350,w:0,h:290},{x:512,y:352,w:1,h:288},{x:1406,y:383,w:3,h:98},{x:576,y:96,w:32,h:2,e:0},{x:679,y:221,w:52,h:1,cm:2,cmm:1},{x:513,y:64,w:257,h:1},{x:481,y:253,w:32,h:3},{x:481,y:636,w:32,h:3},{x:664,y:224,w:80,h:1},{x:0,y:0,w:0,h:0},{x:665,y:192,w:1,h:32},{x:741,y:192,w:1,h:32}]},o=r;t.a=o,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"ISMOVE_0003","C:/Github/collect/src/constants/ismove/isMove_0003.jsx"),__REACT_HOT_LOADER__.register(o,"default","C:/Github/collect/src/constants/ismove/isMove_0003.jsx"))}()},558:function(e,t,n){"use strict";var s=n(559),a=n(560),i=n(561),_=n(562),r=[s.a,a.a,i.a,_.a],o=r;t.a=o,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"messageObject","C:/Github/collect/src/constants/message/index.jsx"),__REACT_HOT_LOADER__.register(o,"default","C:/Github/collect/src/constants/message/index.jsx"))}()},559:function(e,t,n){"use strict";var s=n(3),a=n.n(s),i=[{name:"稻草人",text:[".","..","...","....",".....","......"]},{name:"哆拉樹",text:["大家好!","我被作者配置在樹下所以我叫做哆拉樹。","作者說以前有玩過一些用 RPG 製作大師所製成的遊戲，但是從來沒有親自開發過。","現在作者想做一份線上履歷來介紹自己，以 RPG 製作大師的風格來實作!","因作者並不會美編，所以場景布置的不好看也請多多見諒。",a.a.createElement("span",null," 還不知道如何操作的話請按 ",a.a.createElement("kbd",null," ESC ")),"如果你是行動裝置的話請觸碰左上角的選單按鈕。"]},{name:"古文碑",text:[a.a.createElement("span",null," 作者本名叫 ",a.a.createElement("mark",null," 盧宏寶 ")," 在家排名老二，畢業於高雄市正修科技大學電機工程系， 在網路世界中暱稱為 ",a.a.createElement("mark",null,"DKBO")," "),"英語聽、說很差讀，美感不好，正在努力中。"]}],_=i;t.a=_,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(i,"MESSAGE_0000","C:/Github/collect/src/constants/message/message_0000.jsx"),__REACT_HOT_LOADER__.register(_,"default","C:/Github/collect/src/constants/message/message_0000.jsx"))}()},560:function(e,t,n){"use strict";var s=[{name:"哆拉花",text:["這屋子種了不少花!","下班之後，看看一下花花草草能適度的釋壓。"]},{name:"哆拉花角",text:["我是第一個會走的 NPC 唷"]}],a=s;t.a=a,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(s,"MESSAGE_0001","C:/Github/collect/src/constants/message/message_0001.jsx"),__REACT_HOT_LOADER__.register(a,"default","C:/Github/collect/src/constants/message/message_0001.jsx"))}()},561:function(e,t,n){"use strict";var s=n(3),a=n.n(s),i=[{name:"哆拉工",text:["用老闆做的編輯器隔間二樓，雖然比以前快多了!但還是很累人呢。","過陣子外面也要重整一下了"]},{name:"哆拉客",text:[a.a.createElement("span",null," 據說這個世界有著 ",a.a.createElement("a",{href:"https://zh.wikipedia.org/wiki/%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BD%91%E9%A1%B5%E8%AE%BE%E8%AE%A1",trage:"_blank"}," RWD ")," 的特性，可以隨意縮小放大。"),"想把我變大隻一點的話就縮放一下瀏覽器吧!整個畫面都會跟著變大唷!"]},{name:"哆拉喀",text:["老闆說想要把這世界改造成是網頁抑是遊戲，真不懂老闆在想甚麼。","像我這樣每天走來走去的倒是輕鬆自在呀!"]},{name:"哆拉剋",text:["這個世界目前非常的和平，沒有任何打鬥的痕跡。治安也是非常的好。"]}],_=i;t.a=_,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(i,"MESSAGE_0002","C:/Github/collect/src/constants/message/message_0002.jsx"),__REACT_HOT_LOADER__.register(_,"default","C:/Github/collect/src/constants/message/message_0002.jsx"))}()},562:function(e,t,n){"use strict";var s=[{name:"哆拉空",text:["2樓今晚隔間好嚕，之後就可以慢慢擺設了。"]}],a=s;t.a=a,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(s,"MESSAGE_0003","C:/Github/collect/src/constants/message/message_0003.jsx"),__REACT_HOT_LOADER__.register(a,"default","C:/Github/collect/src/constants/message/message_0003.jsx"))}()},586:function(e,t,n){"use strict";var s=n(122),a=n.n(s),i=n(68),_=n.n(i),r=n(69),o=n.n(r),c=n(72),p=n.n(c),h=n(71),u=n.n(h),l=n(70),y=n.n(l),m=n(3),d=n.n(m),E=n(617);n.n(E),n.d(t,"a",function(){return f});var f=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||_()(t)).apply(this,arguments))}return y()(t,e),p()(t,[{key:"shouldComponentUpdate",value:function(e){return e.npc.messageCount!==this.props.npc.messageCount}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.npc,t=e.npcName,n=e.npcMessage;return d.a.createElement("div",{id:"rpgChatBox",ref:"rpgChatBox"},t," : ","object"===("undefined"==typeof n?"undefined":a()(n))?n.toJS():n)}}]),t}(m.Component);f.propTypes={npc:m.PropTypes.object.isRequired},function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(f,"Chat","C:/Github/collect/src/page/rpg/components/chat.jsx")}()},587:function(e,t,n){"use strict";var s=n(68),a=n.n(s),i=n(69),_=n.n(i),r=n(72),o=n.n(r),c=n(71),p=n.n(c),h=n(70),u=n.n(h),l=n(3),y=n.n(l),m=n(440),d=n(558),E=n(887),f=n.n(E);n.d(t,"a",function(){return T});var T=function(e){function t(){var e,n,s,i;_()(this,t);for(var r=arguments.length,o=Array(r),c=0;c<r;c++)o[c]=arguments[c];return n=s=p()(this,(e=t.__proto__||a()(t)).call.apply(e,[this].concat(o))),s.getPlayerClassName=function(){var e;return(e=s).__getPlayerClassName__REACT_HOT_LOADER__.apply(e,arguments)},s.isDraw=function(){var e;return(e=s).__isDraw__REACT_HOT_LOADER__.apply(e,arguments)},s.moveAnimate=function(){var e;return(e=s).__moveAnimate__REACT_HOT_LOADER__.apply(e,arguments)},s.handleKeyDown=function(){var e;return(e=s).__handleKeyDown__REACT_HOT_LOADER__.apply(e,arguments)},s.handleKeyUp=function(){var e;return(e=s).__handleKeyUp__REACT_HOT_LOADER__.apply(e,arguments)},s.handleResize=function(){var e;return(e=s).__handleResize__REACT_HOT_LOADER__.apply(e,arguments)},i=n,p()(s,i)}return u()(t,e),o()(t,[{key:"componentWillMount",value:function(){this.resize=Rx.Observable.fromEvent(window,"resize").debounceTime(300).do(this.handleResize),this.keyUp=Rx.Observable.fromEvent(window,"keyup").do(this.handleKeyUp),this.keyDown=Rx.Observable.fromEvent(window,"keydown").do(this.handleKeyDown),this.touchStart=Rx.Observable.fromEvent(window,"touchstart").do(this.moveAnimate),this.subscribe=Rx.Observable.merge(this.keyUp,this.keyDown,this.touchStart,this.resize).subscribe()}},{key:"componentDidMount",value:function(){var e=this;this.canvas=this.refs.player,this.player=this.canvas.getContext("2d"),this.player.nX=32,this.player.nY=48,this.img=new Image,this.img.onload=function(){e.handleResize()},this.img.src=f.a,this.af=0,this.props.rAF()(this.isDraw),this.drawPlayer()}},{key:"componentDidUpdate",value:function(){this.drawPlayer()}},{key:"componentWillUnmount",value:function(){this.subscribe.unsubscribe(),this.props.cAF()(this.aframe)}},{key:"__getPlayerClassName__REACT_HOT_LOADER__",value:function(){return this.__getPlayerClassName__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getPlayerClassName__REACT_HOT_LOADER__",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"player";return this.props.sence.get("isTransSence")?e+" x-hide":e}},{key:"__isDraw__REACT_HOT_LOADER__",value:function(){return this.__isDraw__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__isDraw__REACT_HOT_LOADER__",value:function(){if(!this.props.sence.get("isTransSence")){var e=0,t=0,n=!1,s=!1,a=this.props.player,i=a.px,_=a.py,r=a.sx,o=a.sy,c=a.spx,p=a.spy,h=this.props.sence.get("msx"),u=this.props.sence.get("msy"),l=m.a[this.props.sence.get("mapId")].map.width,y=m.a[this.props.sence.get("mapId")].map.height,d=window.innerHeight,E=window.innerWidth,f=this.props.player,T=f.s,g=f.left,R=f.up,A=f.down,v=f.right,w=this.props.sence.get("mDw"),x=this.props.sence.get("mLf"),O=this.props.sence.get("mRf"),C=this.props.sence.get("mUp"),D=this.player,b=D.nX,L=D.nY;if(g&&!v)e=-T,o=L,c+e<x?(h>0&&(h+=e),c+e<=0?c=0:0===h&&(c+=e)):c+=e,n=!0;else if(v&&!g){e=T,o=2*L;var H=l-E;c+e>O?h>=H?c<E-b&&(c+=e):h+=e:c+=e,n=!0}if(R&&!A)t=-T,o=3*L,p+t<C?(u>0&&(u+=t),p+t<=0?p=0:0===u&&(p+=t)):p+=t,s=!0;else if(A&&!R){t=T,o=0;var k=y-d;p+t>w?u>=k?p<d-L&&(p+=t):u+=t:p+=t,s=!0}(n||s)&&(u=u<0?0:u,h=h<0?0:h,i=E>l?c-(E-l)/2:h+c,_=d>y?p-(d-y)/2:u+p,this.isTransSence(i,_)||(this.af=this.af+1===b?0:this.af+=1,r=parseInt(this.af/(b/4),10)*b,this.isMove(i,_)?this.drawSenceAndPlayer({px:i,py:_,sx:r,sy:o,spx:c,spy:p},{msx:h,msy:u}):this.isMove(i,this.props.player.py)?this.drawSenceAndPlayer({px:i,py:this.props.player.py,sx:r,sy:o,spx:c,spy:this.props.player.spy},{msx:h,msy:this.props.sence.get("msy")}):this.isMove(this.props.player.px,_)?this.drawSenceAndPlayer({px:this.props.player.px,py:_,sx:r,sy:o,spx:this.props.player.spx,spy:p},{msx:this.props.sence.get("msx"),msy:u}):this.drawSenceAndPlayer({px:this.props.player.px,py:this.props.player.py,sx:r,sy:o,spx:this.props.player.spx,spy:this.props.player.spy},{msx:this.props.sence.get("msx"),msy:this.props.sence.get("msy")})),this.props.npc.isChat&&this.closeChat())}this.aframe=this.props.rAF()(this.isDraw)}},{key:"drawSenceAndPlayer",value:function(e,t){this.props.pos(e),this.props.sen(t)}},{key:"isMove",value:function(e,t){var n=this.player,s=n.nX,a=n.nY,i=!0;return m.a[this.props.sence.get("mapId")].isMove.forEach(function(n){var _=e+s>=n.x,r=e<=n.x+n.w,o=t+a>=n.y,c=t<=n.y+n.h;_&&r&&o&&c&&(i=!1)}),i}},{key:"isTransSence",value:function e(t,n){var s=this,a=this.player,i=a.nX,_=a.nY,e=!1;return m.a[this.props.sence.get("mapId")].isMove.forEach(function(a){var r=t+i>=a.x,o=t<=a.x+a.w,c=n+_>=a.y,p=n<=a.y+a.h;r&&o&&c&&p&&a.cm>=0&&(e=!0,s.props.sen({mapId:a.cm,isTransSence:e}),s.props.pos({px:m.a[a.cm].map.in[a.cmm].x,py:m.a[a.cm].map.in[a.cmm].y}),s.handleResize())}),e}},{key:"__moveAnimate__REACT_HOT_LOADER__",value:function(){return this.__moveAnimate__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__moveAnimate__REACT_HOT_LOADER__",value:function(){var e=this.props.player,t=e.sy,n=e.s;switch(t){case 0:this.isMessage(0,n);break;case 48:this.isMessage(-n,0);break;case 96:this.isMessage(n,0);break;case 144:this.isMessage(0,-n)}}},{key:"isMessage",value:function(e,t){var n=this,s=this.props.player,a=s.px,i=s.py,_=this.player,r=_.nX,o=_.nY;m.a[this.props.sence.get("mapId")].isMove.forEach(function(s){var _=a+r+e>=s.x,c=a+e<=s.x+s.w,p=i+o+t>=s.y,h=i+t<=s.y+s.h;if(_&&c&&p&&h&&s.e>=0){var u=d.a[n.props.sence.get("mapId")][s.e];if(u.text){var l=n.props.npc.messageCount?n.props.npc.messageCount+1:1,y=u.name,m=u.text.length>=l?u.text[l-1]:u.text[l-2],E=u.text.length>=l;l=u.text.length>=l?l:0,n.props.mes({messageCount:l,npcName:y,npcMessage:m,isChat:E})}}})}},{key:"closeChat",value:function(){var e=0,t=this.props.npc,n=t.npcName,s=t.npcMessage,a=!1;this.props.mes({messageCount:e,npcName:n,npcMessage:s,isChat:a})}},{key:"drawPlayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.player,t=e.spx,n=e.spy,s=e.sx,a=e.sy,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.player,_=i.nX,r=i.nY;this.player.clearRect(0,0,window.innerWidth,window.innerHeight),this.player.drawImage(this.img,s,a,_,r,t,n,_,r)}},{key:"__handleKeyDown__REACT_HOT_LOADER__",value:function(){return this.__handleKeyDown__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__handleKeyDown__REACT_HOT_LOADER__",value:function(e){var t=e.keyCode;switch(t){case 37:this.isKeyDown("left");break;case 38:this.isKeyDown("up");break;case 39:this.isKeyDown("right");break;case 40:this.isKeyDown("down");break;case 32:this.moveAnimate()}}},{key:"isKeyDown",value:function(e){this.props.player[e]||this.props.way(e,!0)}},{key:"__handleKeyUp__REACT_HOT_LOADER__",value:function(){return this.__handleKeyUp__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__handleKeyUp__REACT_HOT_LOADER__",value:function(e){var t=e.keyCode;switch(t){case 37:this.isKeyUp("left");break;case 38:this.isKeyUp("up");break;case 39:this.isKeyUp("right");break;case 40:this.isKeyUp("down")}}},{key:"isKeyUp",value:function(e){this.props.player[e]&&this.props.way(e,!1)}},{key:"__handleResize__REACT_HOT_LOADER__",value:function(){return this.__handleResize__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__handleResize__REACT_HOT_LOADER__",value:function(){var e=this.player,t=e.nY,n=e.nX,s=this.props.player,a=s.px,i=s.py,_=window.innerHeight,r=window.innerWidth,o=_/4,c=r/4,p=m.a[this.props.sence.get("mapId")].map.width,h=m.a[this.props.sence.get("mapId")].map.height,u=parseInt(_/2-o,10)-parseInt(_/2-o,10)%4,l=parseInt(_/2+(o-t),10)-parseInt(_/2+(o-t),10)%4,y=parseInt(r/2-c,10)-parseInt(r/2-c,10)%4,d=parseInt(r/2+(c-n),10)-parseInt(r/2+(c-n),10)%4,E=void 0;E=r>p||a<=d?0:a>=p-n||a-d>p-r?p-r:a-d;var f=void 0;f=_>h||i<=l?0:i>=h-t||i-l>h-_?h-_:i-l;var T=void 0;T=r>p?a+(r-p)/2:a<=d?a:a>=p-n||a-d>p-r?a-E:d;var g=void 0;g=_>h?i+(_-h)/2:i<=l?i:i>=h-t||i-l>h-_?i-f:l,this.drawSenceAndPlayer({spx:T,spy:g},{mUp:u,mDw:l,mLf:y,mRf:d,msx:E,msy:f})}},{key:"render",value:function(){return y.a.createElement("div",null,y.a.createElement("canvas",{className:this.getPlayerClassName(),ref:"player",width:window.innerWidth>this.width?this.width:window.innerWidth,height:window.innerHeight>this.height?this.height:window.innerHeight}))}}]),t}(l.Component);T.propTypes={npc:l.PropTypes.shape({isChat:l.PropTypes.bool,npcName:l.PropTypes.string,messageCount:l.PropTypes.number,npcMessage:l.PropTypes.any}).isRequired,player:l.PropTypes.shape({s:l.PropTypes.number,px:l.PropTypes.number,py:l.PropTypes.number,sx:l.PropTypes.number,sy:l.PropTypes.number,spx:l.PropTypes.number,spy:l.PropTypes.number,
left:l.PropTypes.bool,right:l.PropTypes.bool,up:l.PropTypes.bool,down:l.PropTypes.bool}).isRequired,sence:l.PropTypes.any,pos:l.PropTypes.func.isRequired,sen:l.PropTypes.func.isRequired,mes:l.PropTypes.func.isRequired,way:l.PropTypes.func.isRequired,rAF:l.PropTypes.func.isRequired,cAF:l.PropTypes.func.isRequired},function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(T,"Player","C:/Github/collect/src/page/rpg/components/player.jsx")}()},588:function(e,t,n){"use strict";var s=n(68),a=n.n(s),i=n(69),_=n.n(i),r=n(72),o=n.n(r),c=n(71),p=n.n(c),h=n(70),u=n.n(h),l=n(3),y=n.n(l),m=n(440);n.d(t,"a",function(){return d});var d=function(e){function t(e){_()(this,t);var n=p()(this,(t.__proto__||a()(t)).call(this,e));return n.getSenceClassName=function(){return n.__getSenceClassName__REACT_HOT_LOADER__.apply(n,arguments)},n.width=m.a[e.sence.get("mapId")].map.width,n.height=m.a[e.sence.get("mapId")].map.height,n.img=new Image,n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.canvas=this.refs.sence,this.sence=this.canvas.getContext("2d"),this.senceChange()}},{key:"shouldComponentUpdate",value:function(e){return this.props.sence.get("mapId")!==e.sence.get("mapId")&&this.senceChange(e),this.props.sence!==e.sence}},{key:"componentDidUpdate",value:function(){this.drawSence()}},{key:"__getSenceClassName__REACT_HOT_LOADER__",value:function(){return this.__getSenceClassName__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getSenceClassName__REACT_HOT_LOADER__",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sence";return this.props.sence.get("isTransSence")?e+" x-hide":e}},{key:"drawSence",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.sence.get("msx"),n=e.sence.get("msy");this.sence.clearRect(0,0,window.innerWidth,window.innerHeight),this.sence.drawImage(this.img,t,n,this.width,this.height,0,0,this.width,this.height)}},{key:"senceChange",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.width=m.a[t.sence.get("mapId")].map.width,this.height=m.a[t.sence.get("mapId")].map.height,this.img.onload=function(){e.drawSence(),t.sence.get("isTransSence")&&setTimeout(function(){return t.sen({isTransSence:!1})},1e3)},this.img.src=m.a[t.sence.get("mapId")].map[t.senceImg]}},{key:"render",value:function(){return y.a.createElement("div",null,y.a.createElement("canvas",{className:this.getSenceClassName(),ref:"sence",width:Math.min(window.innerWidth,this.width),height:Math.min(window.innerHeight,this.height)}))}}]),t}(l.Component);d.propTypes={sence:l.PropTypes.object.isRequired},function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(d,"Sence","C:/Github/collect/src/page/rpg/components/sence.jsx")}()},589:function(e,t,n){"use strict";var s=n(41),a=n.n(s),i=n(68),_=n.n(i),r=n(69),o=n.n(r),c=n(72),p=n.n(c),h=n(71),u=n.n(h),l=n(70),y=n.n(l),m=n(3),d=n.n(m),E=n(587),f=n(588),T=n(586),g=n(552),R=n(434),A=n(618);n.n(A),n.d(t,"a",function(){return v});var v=function(e){function t(){var e,n,s,a;o()(this,t);for(var i=arguments.length,r=Array(i),c=0;c<i;c++)r[c]=arguments[c];return n=s=u()(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(r))),s.getTouchPos=function(){var e;return(e=s).__getTouchPos__REACT_HOT_LOADER__.apply(e,arguments)},s.requestAFrame=function(){var e;return(e=s).__requestAFrame__REACT_HOT_LOADER__.apply(e,arguments)},s.cancelAFrame=function(){var e;return(e=s).__cancelAFrame__REACT_HOT_LOADER__.apply(e,arguments)},s.handleTouchMove=function(){var e;return(e=s).__handleTouchMove__REACT_HOT_LOADER__.apply(e,arguments)},s.handleTouchEnd=function(){var e;return(e=s).__handleTouchEnd__REACT_HOT_LOADER__.apply(e,arguments)},a=n,u()(s,a)}return y()(t,e),p()(t,[{key:"componentWillMount",value:function(){var e=this,t=Rx.Observable.fromEvent(document,"touchstart"),n=Rx.Observable.fromEvent(document,"touchmove"),s=Rx.Observable.fromEvent(document,"touchend").map(function(){return e.handleTouchEnd()});this.move=t.concatMap(function(){return n.takeUntil(s)}).withLatestFrom(t,function(e,t){return e.preventDefault(),{move:e,start:t}}).subscribe(this.handleTouchMove)}},{key:"componentDidMount",value:function(){document.oncontextmenu=function(){return!1}}},{key:"componentWillUnmount",value:function(){document.oncontextmenu=function(){return!0},this.move.unsubscribe()}},{key:"__getTouchPos__REACT_HOT_LOADER__",value:function(){return this.__getTouchPos__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getTouchPos__REACT_HOT_LOADER__",value:function(e){return{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}}},{key:"__requestAFrame__REACT_HOT_LOADER__",value:function(){return this.__requestAFrame__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__requestAFrame__REACT_HOT_LOADER__",value:function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}},{key:"__cancelAFrame__REACT_HOT_LOADER__",value:function(){return this.__cancelAFrame__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__cancelAFrame__REACT_HOT_LOADER__",value:function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.clearTimeout}},{key:"__handleTouchMove__REACT_HOT_LOADER__",value:function(){return this.__handleTouchMove__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__handleTouchMove__REACT_HOT_LOADER__",value:function(e){var t=e.move,n=e.start,s=this.getTouchPos(t),a=this.getTouchPos(n),i=s.x-a.x,_=s.y-a.y;i<-30?this.isTouchStart("left"):this.isTouchEnd("left"),i>30?this.isTouchStart("right"):this.isTouchEnd("right"),_<-30?this.isTouchStart("up"):this.isTouchEnd("up"),_>30?this.isTouchStart("down"):this.isTouchEnd("down")}},{key:"__handleTouchEnd__REACT_HOT_LOADER__",value:function(){return this.__handleTouchEnd__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__handleTouchEnd__REACT_HOT_LOADER__",value:function(){this.isTouchEnd("down"),this.isTouchEnd("up"),this.isTouchEnd("right"),this.isTouchEnd("left")}},{key:"isTouchEnd",value:function(e){this.props.player[e]&&this.props.way(e,!1)}},{key:"isTouchStart",value:function(e){this.props.player[e]||this.props.way(e,!0)}},{key:"render",value:function(){return d.a.createElement("div",{id:"rpg"},this.props.sence.get("isTransSence")?d.a.createElement(g.a,{loadText:"載入中請稍後"}):null,d.a.createElement(f.a,a()({},this.props,{senceImg:"second"})),d.a.createElement(E.a,a()({},this.props,{rAF:this.requestAFrame,cAF:this.cancelAFrame})),d.a.createElement(f.a,a()({},this.props,{senceImg:"first"})),this.props.npc.isChat?d.a.createElement(T.a,{npc:this.props.npc}):null,d.a.createElement(R.a,a()({},this.props,{miniChatStyle:{left:0}})))}}]),t}(m.Component);v.propTypes={sence:m.PropTypes.any,npc:m.PropTypes.object,way:m.PropTypes.func,player:m.PropTypes.object},function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(v,"Rpg","C:/Github/collect/src/page/rpg/rpg.jsx")}()},598:function(e,t){},617:function(e,t){},618:function(e,t){},879:function(e,t,n){e.exports=n.p+"images/0000F.png"},880:function(e,t,n){e.exports=n.p+"images/0000S.png"},881:function(e,t,n){e.exports=n.p+"images/0001F.png"},882:function(e,t,n){e.exports=n.p+"images/0001S.png"},883:function(e,t,n){e.exports=n.p+"images/0002F.png"},884:function(e,t,n){e.exports=n.p+"images/0002S.png"},885:function(e,t,n){e.exports=n.p+"images/0003F.png"},886:function(e,t,n){e.exports=n.p+"images/0003S.png"},887:function(e,t,n){e.exports=n.p+"images/man.png"}});