webpackJsonp([3],{1017:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(72),a=n.n(s),i=n(81),_=n.n(i),r=n(82),o=n.n(r),c=n(85),h=n.n(c),p=n(83),l=n.n(p),u=n(84),m=n.n(u),y=n(3),d=n.n(y),E=n(14),g=n.n(E),f=n(978),T=n.n(f),R=n(979),A=n.n(R),w={map:{index:0,name:"大地圖",first:T.a,second:A.a,width:1920,height:1280,in:[{x:472,y:544},{x:1344,y:512},{x:744,y:40},{x:20,y:1200}]},isMove:[{n:"largetree",x:896,y:392,w:64,h:64},{n:"stone",x:980,y:512,w:64,h:1,e:2},{n:"house",x:384,y:352,w:224,h:160},{n:"house",x:384,y:352,w:224,h:128},{n:"housedoor",x:504,y:480,w:1,h:32,cm:1,cmm:0},{n:"wood",x:508,y:524,w:64,h:18},{n:"fence",x:409,y:656,w:309,h:1},{n:"fence",x:788,y:656,w:243,h:1},{n:"fence",x:409,y:880,w:621,h:1},{n:"fence",x:409,y:656,w:4,h:224},{n:"fence",x:1028,y:656,w:4,h:224},{n:"bogy",x:578,y:760,w:32,h:1,e:0},{n:"man",x:810,y:518,w:32,h:1,e:1},{n:"水池",x:864,y:768,w:64,h:1},{n:"紅屋",x:1312,y:288,w:448,h:128},{n:"紅屋",x:1312,y:448,w:160,h:32},{n:"紅屋",x:1316,y:512,w:24,h:1},{n:"紅屋",x:1424,y:512,w:32,h:1},{n:"紅屋",x:1536,y:506,w:64,h:6},{n:"紅屋",x:1664,y:506,w:64,h:6},{n:"紅屋",x:1344,y:480,w:12,h:1,cm:2,cmm:0},{n:"柵欄",x:1230,y:170,w:610,h:1},{n:"柵欄",x:1230,y:608,w:76,h:1},{n:"柵欄",x:1408,y:608,w:434,h:1},{n:"柵欄",x:1230,y:170,w:1,h:416},{n:"柵欄",x:1840,y:170,w:1,h:416},{x:1503,y:1120,w:66,h:1},{x:1697,y:1088,w:63,h:1},{x:1312,y:1088,w:65,h:1},{x:960,y:1088,w:65,h:1},{x:766,y:1120,w:67,h:1},{x:1122,y:1120,w:62,h:1},{x:416,y:1120,w:63,h:1},{x:577,y:1088,w:63,h:1},{x:1,y:1088,w:222,h:0},{x:217,y:300,w:6,h:726},{x:130,y:1034,w:60,h:8},{x:98,y:1024,w:28,h:1},{x:194,y:1024,w:28,h:1},{x:88,y:14,w:8,h:1013},{x:1,y:1003,w:87,h:6},{x:314,y:204,w:387,h:20},{x:800,y:204,w:63,h:21},{x:94,y:12,w:577,h:18},{x:862,y:15,w:1059,h:17},{x:857,y:32,w:5,h:180},{x:7,y:1084,w:216,h:2},{x:223,y:322,w:96,h:3},{x:310,y:216,w:9,h:106},{x:799,y:253,w:0,h:21},{x:797,y:205,w:2,h:38},{x:702,y:205,w:4,h:38},{x:680,y:2,w:173,h:3},{x:5,y:1126,w:1,h:152}],npc:[{b:"http://dkbo.github.io/images/man.png",type:4,pX:1550,pY:800,aX:1152,aY:672,aW:600,aH:240,mX:50,mY:50,x:0,y:0,w:32,h:48,d:0,l:1,r:2,u:3,t:0,s:0,f:0,footSpeed:8,isR:!1,isU:!1,isD:!1,isL:!1,isM:!1,e:3}]},x=w,O=x,v=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(w,"ISMOVE_0000","E:/project/collect/src/constants/ismove/isMove_0000.jsx"),__REACT_HOT_LOADER__.register(x,"default","E:/project/collect/src/constants/ismove/isMove_0000.jsx"))}(),n(980)),C=n.n(v),D=n(981),L=n.n(D),H={map:{index:1,name:"花草屋",first:C.a,second:L.a,width:960,height:640,in:[{x:472,y:580}]},isMove:[{n:"man",x:480,y:352,w:32,h:0,e:0},{n:"牆",x:448,y:640,w:64,h:0,cm:0,cmm:0},{n:"牆",x:32,y:0,w:0,h:640},{n:"牆",x:928,y:0,w:0,h:640},{n:"牆",x:32,y:32,w:928,h:0},{n:"牆",x:32,y:608,w:416,h:0},{n:"牆",x:512,y:608,w:416,h:0},{n:"花",x:128,y:64,w:32,h:0},{n:"花",x:128,y:224,w:32,h:0},{n:"花",x:128,y:384,w:32,h:0},{n:"花",x:800,y:64,w:32,h:0},{n:"花",x:800,y:224,w:32,h:0},{n:"花",x:800,y:384,w:32,h:0},{n:"石碑",x:224,y:160,w:32,h:0},{n:"石碑",x:224,y:320,w:32,h:0},{n:"石碑",x:704,y:160,w:32,h:0},{n:"石碑",x:704,y:320,w:32,h:0}],npc:[{b:"http://dkbo.github.io/images/man.png",type:0,pX:650,pY:500,aX:512,aY:416,aW:350,aH:140,mX:0,mY:0,x:0,y:0,w:32,h:48,d:0,l:1,r:2,u:3,t:0,s:0,f:0,footSpeed:8,isR:!1,isU:!1,isD:!1,isL:!1,isM:!1,e:1}]},k=H,b=k,M=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(H,"ISMOVE_0001","E:/project/collect/src/constants/ismove/isMove_0001.jsx"),__REACT_HOT_LOADER__.register(k,"default","E:/project/collect/src/constants/ismove/isMove_0001.jsx"))}(),n(982)),S=n.n(M),j=n(983),N=n.n(j),U={map:{index:2,name:"房屋(1F)",first:S.a,second:N.a,width:1440,height:960,in:[{x:48,y:896},{x:720,y:96}]},isMove:[{n:"雕像",x:33,y:93,w:32,h:3},{n:"雕像",x:642,y:94,w:28,h:3},{n:"鋼琴",x:309,y:185,w:55,h:5},{n:"桌子",x:133,y:320,w:86,h:22},{n:"桌子",x:454,y:320,w:84,h:22},{n:"牆壁",x:32,y:60,w:640,h:2},{n:"牆壁",x:128,y:734,w:2,h:223},{n:"牆壁",x:131,y:730,w:1276,h:4},{n:"牆壁",x:1406,y:349,w:3,h:380},{n:"牆壁",x:1119,y:352,w:289,h:32},{n:"牆壁",x:768,y:352,w:287,h:32},{n:"牆壁",x:800,y:58,w:607,h:6},{n:"牆壁",x:767,y:0,w:3,h:351},{n:"牆壁",x:703,y:5,w:2,h:379},{n:"牆壁",x:703,y:383,w:3,h:195},{n:"牆壁",x:353,y:544,w:340,h:32},{n:"牆壁",x:32,y:544,w:255,h:32},{n:"牆壁",x:30,y:62,w:1,h:895},{n:"牆壁",x:672,y:61,w:4,h:451},{n:"樓梯",x:713,y:6,w:45,h:7,cm:3,cmm:0},{n:"人",x:813,y:510,w:26,h:4,e:0},{n:"牆壁",x:795,y:60,w:6,h:257},{n:"牆壁",x:1408,y:60,w:2,h:261},{n:"櫥櫃",x:801,y:93,w:609,h:2},{n:"櫥櫃",x:800,y:192,w:128,h:1},{n:"櫥櫃",x:992,y:192,w:128,h:1},{n:"櫥櫃",x:1184,y:192,w:128,h:1},{n:"櫥櫃",x:800,y:288,w:128,h:1},{n:"櫥櫃",x:992,y:288,w:128,h:1},{n:"櫥櫃",x:1184,y:288,w:128,h:1},{n:"門口",x:38,y:952,w:78,h:7,cm:0,cmm:1}],npc:[{b:"http://dkbo.github.io/images/man.png",type:0,pX:128,pY:224,aX:64,aY:128,aW:188,aH:128,mX:0,mY:0,x:0,y:0,w:32,h:48,d:0,l:1,r:2,u:3,t:0,s:0,f:0,footSpeed:8,isR:!1,isU:!1,isD:!1,isL:!1,isM:!1,e:1},{b:"http://dkbo.github.io/images/man.png",type:0,pX:504,pY:224,aX:384,aY:128,aW:224,aH:128,mX:0,mY:0,x:0,y:0,w:32,h:48,d:0,l:1,r:2,u:3,t:0,s:0,f:0,footSpeed:8,isR:!1,isU:!1,isD:!1,isL:!1,isM:!1,e:2},{b:"http://dkbo.github.io/images/man.png",type:0,pX:428,pY:424,aX:64,aY:352,aW:564,aH:128,mX:0,mY:0,x:0,y:0,w:32,h:48,d:0,l:1,r:2,u:3,t:0,s:0,f:0,footSpeed:8,isR:!1,isU:!1,isD:!1,isL:!1,isM:!1,e:3}]},I=U,F=I,P=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(U,"ISMOVE_0002","E:/project/collect/src/constants/ismove/isMove_0002.jsx"),__REACT_HOT_LOADER__.register(I,"default","E:/project/collect/src/constants/ismove/isMove_0002.jsx"))}(),n(984)),q=n.n(P),K=n(985),X=n.n(K),Y={map:{index:3,name:"房屋(2F)",first:q.a,second:X.a,width:1440,height:960,in:[{x:672,y:160}]},isMove:[{n:"牆壁",x:1120,y:352,w:289,h:32},{n:"牆壁",x:768,y:352,w:288,h:32},{n:"牆壁",x:800,y:64,w:607,h:1},{n:"牆壁",x:800,y:64,w:1,h:257},{n:"牆壁",x:1408,y:60,w:2,h:261},{x:0,y:0,w:0,h:0},{x:0,y:0,w:0,h:0},{x:33,y:64,w:447,h:1},{x:32,y:63,w:1,h:883},{x:32,y:352,w:449,h:33},{x:800,y:512,w:256,h:32},{x:1120,y:512,w:288,h:33},{x:800,y:541,w:2,h:162},{x:1406,y:545,w:2,h:160},{x:0,y:0,w:0,h:0},{x:125,y:733,w:3,h:166},{x:32,y:894,w:94,h:1},{x:768,y:512,w:3,h:223},{x:125,y:730,w:1310,h:5},{x:480,y:384,w:1,h:256},{x:0,y:0,w:0,h:0},{x:512,y:64,w:1,h:192},{x:768,y:64,w:2,h:227},{x:608,y:288,w:159,h:32},{x:480,y:64,w:2,h:192},{x:512,y:350,w:0,h:290},{x:512,y:352,w:1,h:288},{x:1406,y:383,w:3,h:98},{x:576,y:96,w:32,h:2,e:0},{x:679,y:221,w:52,h:1,cm:2,cmm:1},{x:513,y:64,w:257,h:1},{x:481,y:253,w:32,h:3},{x:481,y:636,w:32,h:3},{x:664,y:224,w:80,h:1},{x:0,y:0,w:0,h:0},{x:665,y:192,w:1,h:32},{x:741,y:192,w:1,h:32}]},B=Y,W=B,z=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Y,"ISMOVE_0003","E:/project/collect/src/constants/ismove/isMove_0003.jsx"),__REACT_HOT_LOADER__.register(B,"default","E:/project/collect/src/constants/ismove/isMove_0003.jsx"))}(),[O,b,F,W]),G=z,V=G,J=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(z,"isMoveObject","E:/project/collect/src/constants/ismove/index.jsx"),__REACT_HOT_LOADER__.register(G,"default","E:/project/collect/src/constants/ismove/index.jsx"))}(),[{name:"稻草人",text:[".","..","...","....",".....","......"]},{name:"哆拉樹",text:["大家好!","我被作者配置在樹下所以我叫做哆拉樹。","作者說以前有玩過一些用 RPG 製作大師所製成的遊戲，但是從來沒有親自開發過。","現在作者想做一份線上履歷來介紹自己，以 RPG 製作大師的風格來實作!","因作者並不會美編，所以場景布置的不好看也請多多見諒。",d.a.createElement("span",null," 還不知道如何操作的話請按 ",d.a.createElement("kbd",null," ESC ")),"如果你是行動裝置的話請觸碰左上角的選單按鈕。"]},{name:"古文碑",text:[d.a.createElement("span",null," 作者本名叫 ",d.a.createElement("mark",null," 盧宏寶 ")," 在家排名老二，畢業於高雄市正修科技大學電機工程系， 在網路世界中暱稱為 ",d.a.createElement("mark",null,"DKBO")," "),"英語聽、說很差讀，美感不好，正在努力中。"]}]),Q=J,Z=Q,$=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(J,"MESSAGE_0000","E:/project/collect/src/constants/message/message_0000.jsx"),__REACT_HOT_LOADER__.register(Q,"default","E:/project/collect/src/constants/message/message_0000.jsx"))}(),[{name:"哆拉花",text:["這屋子種了不少花!","下班之後，看看一下花花草草能適度的釋壓。"]},{name:"哆拉花角",text:["我是第一個會走的 NPC 唷"]}]),ee=$,te=ee,ne=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register($,"MESSAGE_0001","E:/project/collect/src/constants/message/message_0001.jsx"),__REACT_HOT_LOADER__.register(ee,"default","E:/project/collect/src/constants/message/message_0001.jsx"))}(),[{name:"哆拉工",text:["用老闆做的編輯器隔間二樓，雖然比以前快多了!但還是很累人呢。","過陣子外面也要重整一下了"]},{name:"哆拉客",text:[d.a.createElement("span",null," 據說這個世界有著 ",d.a.createElement("a",{href:"https://zh.wikipedia.org/wiki/%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BD%91%E9%A1%B5%E8%AE%BE%E8%AE%A1",trage:"_blank"}," RWD ")," 的特性，可以隨意縮小放大。"),"想把我變大隻一點的話就縮放一下瀏覽器吧!整個畫面都會跟著變大唷!"]},{name:"哆拉喀",text:["老闆說想要把這世界改造成是網頁抑是遊戲，真不懂老闆在想甚麼。","像我這樣每天走來走去的倒是輕鬆自在呀!"]},{name:"哆拉剋",text:["這個世界目前非常的和平，沒有任何打鬥的痕跡。治安也是非常的好。"]}]),se=ne,ae=se,ie=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ne,"MESSAGE_0002","E:/project/collect/src/constants/message/message_0002.jsx"),__REACT_HOT_LOADER__.register(se,"default","E:/project/collect/src/constants/message/message_0002.jsx"))}(),[{name:"哆拉空",text:["2樓今晚隔間好嚕，之後就可以慢慢擺設了。"]}]),_e=ie,re=_e,oe=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ie,"MESSAGE_0003","E:/project/collect/src/constants/message/message_0003.jsx"),__REACT_HOT_LOADER__.register(_e,"default","E:/project/collect/src/constants/message/message_0003.jsx"))}(),[Z,te,ae,re]),ce=oe,he=ce,pe=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(oe,"messageObject","E:/project/collect/src/constants/message/index.jsx"),__REACT_HOT_LOADER__.register(ce,"default","E:/project/collect/src/constants/message/index.jsx"))}(),n(986)),le=n.n(pe),ue=function(e){function t(){var e,n,s,a;o()(this,t);for(var i=arguments.length,r=Array(i),c=0;c<i;c++)r[c]=arguments[c];return n=s=l()(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(r))),s.getPlayerClassName=function(){var e;return(e=s).__getPlayerClassName__REACT_HOT_LOADER__.apply(e,arguments)},s.isDraw=function(){var e;return(e=s).__isDraw__REACT_HOT_LOADER__.apply(e,arguments)},s.moveAnimate=function(){var e;return(e=s).__moveAnimate__REACT_HOT_LOADER__.apply(e,arguments)},s.handleKeyDown=function(){var e;return(e=s).__handleKeyDown__REACT_HOT_LOADER__.apply(e,arguments)},s.handleKeyUp=function(){var e;return(e=s).__handleKeyUp__REACT_HOT_LOADER__.apply(e,arguments)},s.handleResize=function(){var e;return(e=s).__handleResize__REACT_HOT_LOADER__.apply(e,arguments)},a=n,l()(s,a)}return m()(t,e),h()(t,[{key:"componentWillMount",value:function(){this.resize=Rx.Observable.fromEvent(window,"resize").debounceTime(300).do(this.handleResize),this.keyUp=Rx.Observable.fromEvent(window,"keyup").do(this.handleKeyUp),this.keyDown=Rx.Observable.fromEvent(window,"keydown").do(this.handleKeyDown),this.touchStart=Rx.Observable.fromEvent(window,"touchstart").do(this.moveAnimate),this.subscribe=Rx.Observable.merge(this.keyUp,this.keyDown,this.touchStart,this.resize).subscribe()}},{key:"componentDidMount",value:function(){var e=this;this.canvas=this.refs.player,this.player=this.canvas.getContext("2d"),this.player.nX=32,this.player.nY=48,this.img=new Image,this.img.onload=function(){e.handleResize()},this.img.src=le.a,this.af=0,this.props.rAF()(this.isDraw),this.drawPlayer()}},{key:"componentDidUpdate",value:function(){this.drawPlayer()}},{key:"componentWillUnmount",value:function(){this.subscribe.unsubscribe(),this.props.cAF()(this.aframe)}},{key:"__getPlayerClassName__REACT_HOT_LOADER__",value:function(){return this.__getPlayerClassName__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getPlayerClassName__REACT_HOT_LOADER__",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"player";return this.props.sence.get("isTransSence")?e+" x-hide":e}},{key:"__isDraw__REACT_HOT_LOADER__",value:function(){return this.__isDraw__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__isDraw__REACT_HOT_LOADER__",value:function(){if(!this.props.sence.get("isTransSence")){var e=0,t=0,n=!1,s=!1,a=this.props.player,i=a.px,_=a.py,r=a.sx,o=a.sy,c=a.spx,h=a.spy,p=this.props.sence.get("msx"),l=this.props.sence.get("msy"),u=V[this.props.sence.get("mapId")].map.width,m=V[this.props.sence.get("mapId")].map.height,y=window.innerHeight,d=window.innerWidth,E=this.props.player,g=E.s,f=E.left,T=E.up,R=E.down,A=E.right,w=this.props.sence.get("mDw"),x=this.props.sence.get("mLf"),O=this.props.sence.get("mRf"),v=this.props.sence.get("mUp"),C=this.player,D=C.nX,L=C.nY;if(f&&!A)e=-g,o=L,c+e<x?(p>0&&(p+=e),c+e<=0?c=0:0===p&&(c+=e)):c+=e,n=!0;else if(A&&!f){e=g,o=2*L;var H=u-d;c+e>O?p>=H?c<d-D&&(c+=e):p+=e:c+=e,n=!0}if(T&&!R)t=-g,o=3*L,h+t<v?(l>0&&(l+=t),h+t<=0?h=0:0===l&&(h+=t)):h+=t,s=!0;else if(R&&!T){t=g,o=0;var k=m-y;h+t>w?l>=k?h<y-L&&(h+=t):l+=t:h+=t,s=!0}(n||s)&&(l=l<0?0:l,p=p<0?0:p,i=d>u?c-(d-u)/2:p+c,_=y>m?h-(y-m)/2:l+h,this.isTransSence(i,_)||(this.af=this.af+1===D?0:this.af+=1,r=parseInt(this.af/(D/4),10)*D,this.isMove(i,_)?this.drawSenceAndPlayer({px:i,py:_,sx:r,sy:o,spx:c,spy:h},{msx:p,msy:l}):this.isMove(i,this.props.player.py)?this.drawSenceAndPlayer({px:i,py:this.props.player.py,sx:r,sy:o,spx:c,spy:this.props.player.spy},{msx:p,msy:this.props.sence.get("msy")}):this.isMove(this.props.player.px,_)?this.drawSenceAndPlayer({px:this.props.player.px,py:_,sx:r,sy:o,spx:this.props.player.spx,spy:h},{msx:this.props.sence.get("msx"),msy:l}):this.drawSenceAndPlayer({px:this.props.player.px,py:this.props.player.py,sx:r,sy:o,spx:this.props.player.spx,spy:this.props.player.spy},{msx:this.props.sence.get("msx"),msy:this.props.sence.get("msy")})),this.props.npc.isChat&&this.closeChat())}this.aframe=this.props.rAF()(this.isDraw)}},{key:"drawSenceAndPlayer",value:function(e,t){this.props.pos(e),this.props.sen(t)}},{key:"isMove",value:function(e,t){var n=this.player,s=n.nX,a=n.nY,i=!0;return V[this.props.sence.get("mapId")].isMove.forEach(function(n){var _=e+s>=n.x,r=e<=n.x+n.w,o=t+a>=n.y,c=t<=n.y+n.h;_&&r&&o&&c&&(i=!1)}),i}},{key:"isTransSence",value:function(e,t){var n=this,s=this.player,a=s.nX,i=s.nY,_=!1;return V[this.props.sence.get("mapId")].isMove.forEach(function(s){var r=e+a>=s.x,o=e<=s.x+s.w,c=t+i>=s.y,h=t<=s.y+s.h;r&&o&&c&&h&&s.cm>=0&&(_=!0,n.props.sen({mapId:s.cm,isTransSence:_}),n.props.pos({px:V[s.cm].map.in[s.cmm].x,py:V[s.cm].map.in[s.cmm].y}),n.handleResize())}),_}},{key:"__moveAnimate__REACT_HOT_LOADER__",value:function(){return this.__moveAnimate__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__moveAnimate__REACT_HOT_LOADER__",value:function(){var e=this.props.player,t=e.sy,n=e.s;switch(t){case 0:this.isMessage(0,n);break;case 48:this.isMessage(-n,0);break;case 96:this.isMessage(n,0);break;case 144:this.isMessage(0,-n)}}},{key:"isMessage",value:function(e,t){var n=this,s=this.props.player,a=s.px,i=s.py,_=this.player,r=_.nX,o=_.nY;V[this.props.sence.get("mapId")].isMove.forEach(function(s){var _=a+r+e>=s.x,c=a+e<=s.x+s.w,h=i+o+t>=s.y,p=i+t<=s.y+s.h;if(_&&c&&h&&p&&s.e>=0){var l=he[n.props.sence.get("mapId")][s.e];if(l.text){var u=n.props.npc.messageCount?n.props.npc.messageCount+1:1,m=l.name,y=l.text.length>=u?l.text[u-1]:l.text[u-2],d=l.text.length>=u;u=l.text.length>=u?u:0,n.props.mes({messageCount:u,npcName:m,npcMessage:y,isChat:d})}}})}},{key:"closeChat",value:function(){var e=this.props.npc,t=e.npcName,n=e.npcMessage;this.props.mes({messageCount:0,npcName:t,npcMessage:n,isChat:!1})}},{key:"drawPlayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.player,t=e.spx,n=e.spy,s=e.sx,a=e.sy,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.player,_=i.nX,r=i.nY;this.player.clearRect(0,0,window.innerWidth,window.innerHeight),this.player.drawImage(this.img,s,a,_,r,t,n,_,r)}},{key:"__handleKeyDown__REACT_HOT_LOADER__",value:function(){return this.__handleKeyDown__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__handleKeyDown__REACT_HOT_LOADER__",value:function(e){switch(e.keyCode){case 37:this.isKeyDown("left");break;case 38:this.isKeyDown("up");break;case 39:this.isKeyDown("right");break;case 40:this.isKeyDown("down");break;case 32:this.moveAnimate()}}},{key:"isKeyDown",value:function(e){this.props.player[e]||this.props.way(e,!0)}},{key:"__handleKeyUp__REACT_HOT_LOADER__",value:function(){return this.__handleKeyUp__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__handleKeyUp__REACT_HOT_LOADER__",value:function(e){switch(e.keyCode){case 37:this.isKeyUp("left");break;case 38:this.isKeyUp("up");break;case 39:this.isKeyUp("right");break;case 40:this.isKeyUp("down")}}},{key:"isKeyUp",value:function(e){this.props.player[e]&&this.props.way(e,!1)}},{key:"__handleResize__REACT_HOT_LOADER__",value:function(){return this.__handleResize__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__handleResize__REACT_HOT_LOADER__",value:function(){var e=this.player,t=e.nY,n=e.nX,s=this.props.player,a=s.px,i=s.py,_=window.innerHeight,r=window.innerWidth,o=_/4,c=r/4,h=V[this.props.sence.get("mapId")].map.width,p=V[this.props.sence.get("mapId")].map.height,l=parseInt(_/2-o,10)-parseInt(_/2-o,10)%4,u=parseInt(_/2+(o-t),10)-parseInt(_/2+(o-t),10)%4,m=parseInt(r/2-c,10)-parseInt(r/2-c,10)%4,y=parseInt(r/2+(c-n),10)-parseInt(r/2+(c-n),10)%4,d=void 0;d=r>h||a<=y?0:a>=h-n||a-y>h-r?h-r:a-y;var E=void 0;E=_>p||i<=u?0:i>=p-t||i-u>p-_?p-_:i-u;var g=void 0;g=r>h?a+(r-h)/2:a<=y?a:a>=h-n||a-y>h-r?a-d:y;var f=void 0;f=_>p?i+(_-p)/2:i<=u?i:i>=p-t||i-u>p-_?i-E:u,this.drawSenceAndPlayer({spx:g,spy:f},{mUp:l,mDw:u,mLf:m,mRf:y,msx:d,msy:E})}},{key:"render",value:function(){return d.a.createElement("div",null,d.a.createElement("canvas",{className:this.getPlayerClassName(),ref:"player",width:window.innerWidth>this.width?this.width:window.innerWidth,height:window.innerHeight>this.height?this.height:window.innerHeight}))}}]),t}(y.Component);ue.propTypes={npc:g.a.shape({isChat:g.a.bool,npcName:g.a.string,messageCount:g.a.number,npcMessage:g.a.any}).isRequired,player:g.a.shape({s:g.a.number,px:g.a.number,py:g.a.number,sx:g.a.number,sy:g.a.number,spx:g.a.number,spy:g.a.number,left:g.a.bool,right:g.a.bool,up:g.a.bool,down:g.a.bool}).isRequired,sence:g.a.any,pos:g.a.func.isRequired,sen:g.a.func.isRequired,mes:g.a.func.isRequired,way:g.a.func.isRequired,rAF:g.a.func.isRequired,cAF:g.a.func.isRequired};var me=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(ue,"Player","E:/project/collect/src/page/rpg/components/player.jsx")}(),function(e){function t(e){o()(this,t);var n=l()(this,(t.__proto__||_()(t)).call(this,e));return n.getSenceClassName=function(){return n.__getSenceClassName__REACT_HOT_LOADER__.apply(n,arguments)},n.width=V[e.sence.get("mapId")].map.width,n.height=V[e.sence.get("mapId")].map.height,n.img=new Image,n}return m()(t,e),h()(t,[{key:"componentDidMount",value:function(){this.canvas=this.refs.sence,this.sence=this.canvas.getContext("2d"),this.senceChange()}},{key:"shouldComponentUpdate",value:function(e){return this.props.sence.get("mapId")!==e.sence.get("mapId")&&this.senceChange(e),this.props.sence!==e.sence}},{key:"componentDidUpdate",value:function(){this.drawSence()}},{key:"__getSenceClassName__REACT_HOT_LOADER__",value:function(){return this.__getSenceClassName__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getSenceClassName__REACT_HOT_LOADER__",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sence";return this.props.sence.get("isTransSence")?e+" x-hide":e}},{key:"drawSence",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.sence.get("msx"),n=e.sence.get("msy");this.sence.clearRect(0,0,window.innerWidth,window.innerHeight),this.sence.drawImage(this.img,t,n,this.width,this.height,0,0,this.width,this.height)}},{key:"senceChange",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.width=V[t.sence.get("mapId")].map.width,this.height=V[t.sence.get("mapId")].map.height,this.img.onload=function(){e.drawSence(),t.sence.get("isTransSence")&&setTimeout(function(){return t.sen({isTransSence:!1})},1e3)},this.img.src=V[t.sence.get("mapId")].map[t.senceImg]}},{key:"render",value:function(){return d.a.createElement("div",null,d.a.createElement("canvas",{className:this.getSenceClassName(),ref:"sence",width:Math.min(window.innerWidth,this.width),height:Math.min(window.innerHeight,this.height)}))}}]),t}(y.Component));me.propTypes={sence:g.a.object.isRequired};var ye=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(me,"Sence","E:/project/collect/src/page/rpg/components/sence.jsx")}(),n(166)),de=n.n(ye),Ee=(n(987),function(e){function t(){return o()(this,t),l()(this,(t.__proto__||_()(t)).apply(this,arguments))}return m()(t,e),h()(t,[{key:"shouldComponentUpdate",value:function(e){return e.npc.messageCount!==this.props.npc.messageCount}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.npc,t=e.npcName,n=e.npcMessage;return d.a.createElement("div",{id:"rpgChatBox",ref:"rpgChatBox"},t," : ","object"===(void 0===n?"undefined":de()(n))?n.toJS():n)}}]),t}(y.Component));Ee.propTypes={npc:g.a.object.isRequired};var ge=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Ee,"Chat","E:/project/collect/src/page/rpg/components/chat.jsx")}(),n(988),function(e){function t(){return o()(this,t),l()(this,(t.__proto__||_()(t)).apply(this,arguments))}return m()(t,e),h()(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return d.a.createElement("div",{id:"loadBox"},d.a.createElement("div",{className:"loader"},d.a.createElement("div",{className:"loader-overlay"}),d.a.createElement("div",{className:"loader-cogs"},d.a.createElement("div",{className:"loader-cogs-top"},d.a.createElement("div",{className:"top-part"}),d.a.createElement("div",{className:"top-part"}),d.a.createElement("div",{className:"top-part"}),d.a.createElement("div",{className:"top-hole"})),d.a.createElement("div",{className:"loader-cogs-left"},d.a.createElement("div",{className:"left-part"}),d.a.createElement("div",{className:"left-part"}),d.a.createElement("div",{className:"left-part"}),d.a.createElement("div",{className:"left-hole"})),d.a.createElement("div",{className:"loader-cogs-bottom"},d.a.createElement("div",{className:"bottom-part"}),d.a.createElement("div",{className:"bottom-part"}),d.a.createElement("div",{className:"bottom-part"}),d.a.createElement("div",{className:"bottom-hole"})),d.a.createElement("p",null,this.props.loadText))))}}]),t}(y.Component));ge.propTypes={loadText:g.a.string};var fe=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(ge,"Loading","E:/project/collect/src/components/loading/loading.jsx")}(),ge),Te=fe,Re=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(fe,"default","E:/project/collect/src/components/loading/index.jsx")}(),n(587)),Ae=(n(989),function(e){function t(){var e,n,s,a;o()(this,t);for(var i=arguments.length,r=Array(i),c=0;c<i;c++)r[c]=arguments[c];return n=s=l()(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(r))),s.getTouchPos=function(){var e;return(e=s).__getTouchPos__REACT_HOT_LOADER__.apply(e,arguments)},s.requestAFrame=function(){var e;return(e=s).__requestAFrame__REACT_HOT_LOADER__.apply(e,arguments)},s.cancelAFrame=function(){var e;return(e=s).__cancelAFrame__REACT_HOT_LOADER__.apply(e,arguments)},s.handleTouchMove=function(){var e;return(e=s).__handleTouchMove__REACT_HOT_LOADER__.apply(e,arguments)},s.handleTouchEnd=function(){var e;return(e=s).__handleTouchEnd__REACT_HOT_LOADER__.apply(e,arguments)},a=n,l()(s,a)}return m()(t,e),h()(t,[{key:"componentWillMount",value:function(){var e=this,t=Rx.Observable.fromEvent(document,"touchstart"),n=Rx.Observable.fromEvent(document,"touchmove"),s=Rx.Observable.fromEvent(document,"touchend").map(function(){return e.handleTouchEnd()});this.move=t.concatMap(function(){return n.takeUntil(s)}).withLatestFrom(t,function(e,t){return e.preventDefault(),{move:e,start:t}}).subscribe(this.handleTouchMove)}},{key:"componentDidMount",value:function(){document.oncontextmenu=function(){return!1}}},{key:"componentWillUnmount",value:function(){document.oncontextmenu=function(){return!0},this.move.unsubscribe()}},{key:"__getTouchPos__REACT_HOT_LOADER__",value:function(){return this.__getTouchPos__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getTouchPos__REACT_HOT_LOADER__",value:function(e){return{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}}},{key:"__requestAFrame__REACT_HOT_LOADER__",value:function(){return this.__requestAFrame__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__requestAFrame__REACT_HOT_LOADER__",value:function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}},{key:"__cancelAFrame__REACT_HOT_LOADER__",value:function(){return this.__cancelAFrame__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__cancelAFrame__REACT_HOT_LOADER__",value:function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.clearTimeout}},{key:"__handleTouchMove__REACT_HOT_LOADER__",value:function(){return this.__handleTouchMove__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__handleTouchMove__REACT_HOT_LOADER__",value:function(e){var t=e.move,n=e.start,s=this.getTouchPos(t),a=this.getTouchPos(n),i=s.x-a.x,_=s.y-a.y;i<-30?this.isTouchStart("left"):this.isTouchEnd("left"),i>30?this.isTouchStart("right"):this.isTouchEnd("right"),_<-30?this.isTouchStart("up"):this.isTouchEnd("up"),_>30?this.isTouchStart("down"):this.isTouchEnd("down")}},{key:"__handleTouchEnd__REACT_HOT_LOADER__",value:function(){return this.__handleTouchEnd__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__handleTouchEnd__REACT_HOT_LOADER__",value:function(){this.isTouchEnd("down"),this.isTouchEnd("up"),this.isTouchEnd("right"),this.isTouchEnd("left")}},{key:"isTouchEnd",value:function(e){this.props.player[e]&&this.props.way(e,!1)}},{key:"isTouchStart",value:function(e){this.props.player[e]||this.props.way(e,!0)}},{key:"render",value:function(){return d.a.createElement("div",{id:"rpg"},this.props.sence.get("isTransSence")?d.a.createElement(Te,{loadText:"載入中請稍後"}):null,d.a.createElement(me,a()({},this.props,{senceImg:"second"})),d.a.createElement(ue,a()({},this.props,{rAF:this.requestAFrame,cAF:this.cancelAFrame})),d.a.createElement(me,a()({},this.props,{senceImg:"first"})),this.props.npc.isChat?d.a.createElement(Ee,{npc:this.props.npc}):null,d.a.createElement(Re.a,a()({},this.props,{miniChatStyle:{left:0}})))}}]),t}(y.Component));Ae.propTypes={sence:g.a.any,npc:g.a.object,way:g.a.func,player:g.a.object};var we=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Ae,"Rpg","E:/project/collect/src/page/rpg/rpg.jsx")}(),Ae);t.default=we,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(we,"default","E:/project/collect/src/page/rpg/index.jsx")}()},583:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var s=n(81),a=n.n(s),i=n(82),_=n.n(i),r=n(85),o=n.n(r),c=n(83),h=n.n(c),p=n(84),l=n.n(p),u=n(3),m=n.n(u),y=n(14),d=n.n(y),E=n(584),g=(n.n(E),function(e){function t(){var e,n,s,i;_()(this,t);for(var r=arguments.length,o=Array(r),c=0;c<r;c++)o[c]=arguments[c];return n=s=h()(this,(e=t.__proto__||a()(t)).call.apply(e,[this].concat(o))),s.state={opacity:0},s.getMessage=function(){var e;return(e=s).__getMessage__REACT_HOT_LOADER__.apply(e,arguments)},s.getMessageContent=function(){var e;return(e=s).__getMessageContent__REACT_HOT_LOADER__.apply(e,arguments)},s.transVideo=function(){var e;return(e=s).__transVideo__REACT_HOT_LOADER__.apply(e,arguments)},i=n,h()(s,i)}return l()(t,e),o()(t,[{key:"componentWillMount",value:function(){var e=this,t=new Image;t.onload=function(){e.setState({opacity:1})},t.onerror=function(t){console.log(t),e.setState({opacity:1})},t.src=this.props.photoURL}},{key:"__getMessage__REACT_HOT_LOADER__",value:function(){return this.__getMessage__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getMessage__REACT_HOT_LOADER__",value:function(){return this.props.type?this.transVideo():this.props.message}},{key:"__getMessageContent__REACT_HOT_LOADER__",value:function(){return this.__getMessageContent__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getMessageContent__REACT_HOT_LOADER__",value:function(){return this.props.type?"messageVideo embed-responsive embed-responsive-16by9":"messagesContent rounded"}},{key:"__transVideo__REACT_HOT_LOADER__",value:function(){return this.__transVideo__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__transVideo__REACT_HOT_LOADER__",value:function(){switch(this.props.type){case"youtube":return m.a.createElement("iframe",{className:"embed-responsive-item",src:"https://www.youtube.com/embed/"+this.props.message,frameBorder:"0",allowFullScreen:!0});default:return this.props.message}}},{key:"render",value:function(){return m.a.createElement("li",{className:this.props.className,style:{opacity:this.state.opacity}},m.a.createElement("figure",null,m.a.createElement("img",{src:this.props.photoURL,alt:this.props.displayName})),m.a.createElement("div",{className:"messagesBox"},m.a.createElement("div",{className:"messagesName"},m.a.createElement("b",null,this.props.displayName)),m.a.createElement("div",{className:this.getMessageContent()},this.getMessage()),m.a.createElement("div",{className:"clearfix"})))}}]),t}(u.Component));g.propTypes={className:d.a.string.isRequired,displayName:d.a.string.isRequired,photoURL:d.a.string.isRequired,message:d.a.string.isRequired,type:d.a.any},function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(g,"Messages","E:/project/collect/src/components/miniChat/components/messages.jsx")}()},584:function(e,t){},585:function(e,t,n){"use strict";n.d(t,"a",function(){return A});var s=n(72),a=n.n(s),i=n(81),_=n.n(i),r=n(82),o=n.n(r),c=n(85),h=n.n(c),p=n(83),l=n.n(p),u=n(84),m=n.n(u),y=n(3),d=n.n(y),E=n(14),g=n.n(E),f=n(248),T=n(108),R=n(586),A=(n.n(R),function(e){function t(){var e,n,s,a;o()(this,t);for(var i=arguments.length,r=Array(i),c=0;c<i;c++)r[c]=arguments[c];return n=s=l()(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(r))),s.state={message:""},s.getPlaceholder=function(){var e;return(e=s).__getPlaceholder__REACT_HOT_LOADER__.apply(e,arguments)},s.getUser=function(){var e;return(e=s).__getUser__REACT_HOT_LOADER__.apply(e,arguments)},s.setMessage=function(){var e;return(e=s).__setMessage__REACT_HOT_LOADER__.apply(e,arguments)},s.setGeoLocation=function(){var e;return(e=s).__setGeoLocation__REACT_HOT_LOADER__.apply(e,arguments)},s.SendMessage=function(){var e;return(e=s).__SendMessage__REACT_HOT_LOADER__.apply(e,arguments)},a=n,l()(s,a)}return m()(t,e),h()(t,[{key:"componentWillMount",value:function(){this.keyDownSubject=new Rx.Subject,this.changeSubject=new Rx.Subject,this.clickSubject=new Rx.Subject,this.keyDown=this.keyDownSubject.filter(function(e){return console.log(321),13===e.keyCode}).throttleTime(1e3).do(this.SendMessage),this.change=this.changeSubject.do(this.setMessage),this.click=this.clickSubject.throttleTime(500).do(this.props.clearMessage),this.event=Rx.Observable.merge(this.change,this.keyDown,this.click).subscribe()}},{key:"componentWillUnmount",value:function(){this.event.unsubscribe()}},{key:"__getPlaceholder__REACT_HOT_LOADER__",value:function(){return this.__getPlaceholder__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getPlaceholder__REACT_HOT_LOADER__",value:function(){return this.getUser()?"留言":"登入後才可留言唷~"}},{key:"__getUser__REACT_HOT_LOADER__",value:function(){return this.__getUser__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getUser__REACT_HOT_LOADER__",value:function(){return firebase.chatAH.currentUser}},{key:"getGeoLocation",value:function(e,t){var n=this;f.a.getCurrentPosition(function(s){var i=[s.coords.latitude,s.coords.longitude],_=i[0],r=i[1];n.setGeoLocation(e,a()({},t,{lat:_,lng:r,uid:e}))})}},{key:"__setMessage__REACT_HOT_LOADER__",value:function(){return this.__setMessage__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__setMessage__REACT_HOT_LOADER__",value:function(e){return this.setState({message:e.target.value})}},{key:"__setGeoLocation__REACT_HOT_LOADER__",value:function(){return this.__setGeoLocation__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__setGeoLocation__REACT_HOT_LOADER__",value:function(e,t){firebase.geoDB.ref("geolocation/"+e).set(t).then(function(){})}},{key:"__SendMessage__REACT_HOT_LOADER__",value:function(){return this.__SendMessage__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__SendMessage__REACT_HOT_LOADER__",value:function(){var e=this,t=this.getUser();if(t){console.log(this.state);var n=this.state.message;if(n.trim()){console.log(3);var s=/(?:[?&]v=|\/embed\/|\/1\/|\/v\/|https:\/\/(?:www\.)?youtu\.be\/)([^&\n?#]+)/,a=n.match(s),i=t.uid,_=t.displayName,r=t.photoURL,o=firebase.database.ServerValue.TIMESTAMP,c=a?{uid:i,message:a[1],type:"youtube",timestamp:o}:{uid:i,message:n,timestamp:o};firebase.chatDB.ref("messages/").push(c).then(function(){c=a?{message:a[1],type:"youtube",timestamp:o,photoURL:r,displayName:_}:{message:n,timestamp:o,photoURL:r,displayName:_},e.getGeoLocation(i,c)}),this.setState({message:""})}}else T.a.push("/auth")}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"control"},d.a.createElement("input",{className:"form-control",type:"text",value:this.state.message,placeholder:this.getPlaceholder(),onChange:function(t){return e.changeSubject.next(t)},onKeyDown:function(t){return e.keyDownSubject.next(t)}}),d.a.createElement("button",{className:"btn",type:"button",title:"發送",onClick:this.SendMessage},d.a.createElement("i",{className:"fa fa-paper-plane"})),d.a.createElement("button",{className:"btn",type:"button",title:"清除",onClick:function(t){return e.clickSubject.next(t)}},d.a.createElement("i",{className:"fa fa-eraser"})))}}]),t}(y.Component));A.propTypes={clearMessage:g.a.func},function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(A,"Control","E:/project/collect/src/components/miniChat/components/control.jsx")}()},586:function(e,t){},587:function(e,t,n){"use strict";var s=n(81),a=n.n(s),i=n(82),_=n.n(i),r=n(85),o=n.n(r),c=n(83),h=n.n(c),p=n(84),l=n.n(p),u=n(3),m=n.n(u),y=n(14),d=n.n(y),E=n(583),g=n(585),f=(n(588),function(e){function t(){var e,n,s,i;_()(this,t);for(var r=arguments.length,o=Array(r),c=0;c<r;c++)o[c]=arguments[c];return n=s=h()(this,(e=t.__proto__||a()(t)).call.apply(e,[this].concat(o))),s.getUser=function(){var e;return(e=s).__getUser__REACT_HOT_LOADER__.apply(e,arguments)},s.handleClick=function(){var e;return(e=s).__handleClick__REACT_HOT_LOADER__.apply(e,arguments)},i=n,h()(s,i)}return l()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.refs.messageBlock.scrollTop=this.refs.messageBlockUl.clientHeight}},{key:"shouldComponentUpdate",value:function(e,t){return e.chat!==this.props.chat||e.miniChat!==this.props.miniChat||this.state!==t}},{key:"componentDidUpdate",value:function(){this.refs.messageBlock.scrollTop=this.refs.messageBlockUl.clientHeight}},{key:"componentWillUnmount",value:function(){firebase.chatDB.ref(".info/connected").off("value",this.connected),firebase.chatDB.ref("members").off("child_changed",this.userOnlineLog)}},{key:"__getUser__REACT_HOT_LOADER__",value:function(){return this.__getUser__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getUser__REACT_HOT_LOADER__",value:function(){return firebase.chatAH.currentUser}},{key:"__handleClick__REACT_HOT_LOADER__",value:function(){return this.__handleClick__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__handleClick__REACT_HOT_LOADER__",value:function(){this.props.toggleMinichat(this.props.chat.size)}},{key:"render",value:function(){var e=this.getUser()?this.getUser():{uid:null},t=this.props.miniChat.get("isShow"),n=this.props.chat.size-this.props.miniChat.get("count");return m.a.createElement("div",{id:"miniChat",style:this.props.miniChatStyle,className:t?"active":""},m.a.createElement("div",{id:"miniChatBox",className:"card"},m.a.createElement("button",{className:"card-header",ref:"miniChatHeader",onClick:this.handleClick},m.a.createElement("b",null,"多人聊天窗口",!t&&n?m.a.createElement("span",{className:"tag tag-danger"},n):null)),m.a.createElement("div",{className:"card-block",ref:"messageBlock"},m.a.createElement("ul",{ref:"messageBlockUl"},this.props.chat.map(function(t){return m.a.createElement(E.a,{key:t.timestamp,className:t.uid===e.uid?"clearfix messagesSelf":"clearfix messagesOther",photoURL:t.photoURL,displayName:t.displayName,message:t.message,type:t.type})})))),m.a.createElement(g.a,{clearMessage:this.props.clearMessage}))}}]),t}(u.Component));f.propTypes={chat:d.a.object.isRequired,clearMessage:d.a.func,toggleMinichat:d.a.func,miniChat:d.a.object.isRequired,miniChatStyle:d.a.object};var T=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(f,"Chat","E:/project/collect/src/components/miniChat/miniChat.jsx")}(),f);t.a=T,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(T,"default","E:/project/collect/src/components/miniChat/index.jsx")}()},588:function(e,t){},978:function(e,t,n){e.exports=n.p+"images/0000F.png"},979:function(e,t,n){e.exports=n.p+"images/0000S.png"},980:function(e,t,n){e.exports=n.p+"images/0001F.png"},981:function(e,t,n){e.exports=n.p+"images/0001S.png"},982:function(e,t,n){e.exports=n.p+"images/0002F.png"},983:function(e,t,n){e.exports=n.p+"images/0002S.png"},984:function(e,t,n){e.exports=n.p+"images/0003F.png"},985:function(e,t,n){e.exports=n.p+"images/0003S.png"},986:function(e,t,n){e.exports=n.p+"images/man.png"},987:function(e,t){},988:function(e,t){},989:function(e,t){}});