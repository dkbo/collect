webpackJsonp([4],{334:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var s=n(61),a=n.n(s),i=n(62),_=n.n(i),r=n(65),o=n.n(r),c=n(63),p=n.n(c),h=n(64),l=n.n(h),u=n(4),y=n.n(u),m=n(335),d=(n.n(m),function(e){function t(){var e,n,s,i;_.a(this,t);for(var r=arguments.length,o=Array(r),c=0;c<r;c++)o[c]=arguments[c];return n=s=p.a(this,(e=t.__proto__||a.a(t)).call.apply(e,[this].concat(o))),s.state={opacity:0},s.getMessage=function(){var e;return(e=s).__getMessage__REACT_HOT_LOADER__.apply(e,arguments)},s.getMessageContent=function(){var e;return(e=s).__getMessageContent__REACT_HOT_LOADER__.apply(e,arguments)},s.transVideo=function(){var e;return(e=s).__transVideo__REACT_HOT_LOADER__.apply(e,arguments)},i=n,p.a(s,i)}return l.a(t,e),o.a(t,[{key:"componentWillMount",value:function(){var e=this,t=new Image;t.onload=function(){e.setState({opacity:1})},t.onerror=function(t){console.log(t),e.setState({opacity:1})},t.src=this.props.photoURL}},{key:"__getMessage__REACT_HOT_LOADER__",value:function(){return this.__getMessage__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getMessage__REACT_HOT_LOADER__",value:function(){return this.props.type?this.transVideo():this.props.message}},{key:"__getMessageContent__REACT_HOT_LOADER__",value:function(){return this.__getMessageContent__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getMessageContent__REACT_HOT_LOADER__",value:function(){return this.props.type?"messageVideo embed-responsive embed-responsive-16by9":"messagesContent rounded"}},{key:"__transVideo__REACT_HOT_LOADER__",value:function(){return this.__transVideo__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__transVideo__REACT_HOT_LOADER__",value:function(){switch(this.props.type){case"youtube":return y.a.createElement("iframe",{className:"embed-responsive-item",src:"https://www.youtube.com/embed/"+this.props.message,frameBorder:"0",allowFullScreen:!0});default:return this.props.message}}},{key:"render",value:function(){return y.a.createElement("li",{className:this.props.className,style:{opacity:this.state.opacity}},y.a.createElement("figure",null,y.a.createElement("img",{src:this.props.photoURL,alt:this.props.displayName})),y.a.createElement("div",{className:"messagesBox"},y.a.createElement("div",{className:"messagesName"},y.a.createElement("b",null,this.props.displayName)),y.a.createElement("div",{className:this.getMessageContent()},this.getMessage()),y.a.createElement("div",{className:"clearfix"})))}}]),t}(u.Component));d.propTypes={className:u.PropTypes.string.isRequired,displayName:u.PropTypes.string.isRequired,photoURL:u.PropTypes.string.isRequired,message:u.PropTypes.string.isRequired,type:u.PropTypes.any},function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(d,"Messages","C:/Github/collect/src/components/miniChat/components/messages.jsx")}()},335:function(e,t){},336:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var s=n(38),a=n.n(s),i=n(61),_=n.n(i),r=n(62),o=n.n(r),c=n(65),p=n.n(c),h=n(63),l=n.n(h),u=n(64),y=n.n(u),m=n(4),d=n.n(m),E=n(165),T=n(109),g=n(337),f=(n.n(g),function(e){function t(){var e,n,s,a;o.a(this,t);for(var i=arguments.length,r=Array(i),c=0;c<i;c++)r[c]=arguments[c];return n=s=l.a(this,(e=t.__proto__||_.a(t)).call.apply(e,[this].concat(r))),s.state={message:""},s.getPlaceholder=function(){var e;return(e=s).__getPlaceholder__REACT_HOT_LOADER__.apply(e,arguments)},s.getUser=function(){var e;return(e=s).__getUser__REACT_HOT_LOADER__.apply(e,arguments)},s.setMessage=function(){var e;return(e=s).__setMessage__REACT_HOT_LOADER__.apply(e,arguments)},s.setGeoLocation=function(){var e;return(e=s).__setGeoLocation__REACT_HOT_LOADER__.apply(e,arguments)},s.SendMessage=function(){var e;return(e=s).__SendMessage__REACT_HOT_LOADER__.apply(e,arguments)},a=n,l.a(s,a)}return y.a(t,e),p.a(t,[{key:"componentWillMount",value:function(){this.keyDownSubject=new Rx.Subject,this.changeSubject=new Rx.Subject,this.clickSubject=new Rx.Subject,this.keyDown=this.keyDownSubject.filter(function(e){return 13===e.keyCode}).throttleTime(1e3).do(this.SendMessage),this.change=this.changeSubject.do(this.setMessage),this.click=this.clickSubject.throttleTime(500).do(this.props.clearMessage),this.event=Rx.Observable.merge(this.change,this.keyDown,this.click).subscribe()}},{key:"componentWillUnmount",value:function(){this.event.unsubscribe()}},{key:"__getPlaceholder__REACT_HOT_LOADER__",value:function(){return this.__getPlaceholder__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getPlaceholder__REACT_HOT_LOADER__",value:function(){return this.getUser()?"留言":"登入後才可留言唷~"}},{key:"__getUser__REACT_HOT_LOADER__",value:function(){return this.__getUser__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getUser__REACT_HOT_LOADER__",value:function(){return firebase.chatAH.currentUser}},{key:"getGeoLocation",value:function(e,t){var n=this;E.a.getCurrentPosition(function(s){var i=[s.coords.latitude,s.coords.longitude],_=i[0],r=i[1];n.setGeoLocation(e,a.a({},t,{lat:_,lng:r,uid:e}))})}},{key:"__setMessage__REACT_HOT_LOADER__",value:function(){return this.__setMessage__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__setMessage__REACT_HOT_LOADER__",value:function(e){return this.setState({message:e.target.value})}},{key:"__setGeoLocation__REACT_HOT_LOADER__",value:function(){return this.__setGeoLocation__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__setGeoLocation__REACT_HOT_LOADER__",value:function(e,t){firebase.geoDB.ref("geolocation/"+e).set(t).then(function(){})}},{key:"__SendMessage__REACT_HOT_LOADER__",value:function(){return this.__SendMessage__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__SendMessage__REACT_HOT_LOADER__",value:function(){var e=this,t=this.getUser();t?function(){var n=e.state.message;n.trim("")&&function(){var s=/(?:[?&]v=|\/embed\/|\/1\/|\/v\/|https:\/\/(?:www\.)?youtu\.be\/)([^&\n?#]+)/,a=n.match(s),i=t.uid,_=t.displayName,r=t.photoURL,o=firebase.database.ServerValue.TIMESTAMP,c=a?{uid:i,message:a[1],type:"youtube",timestamp:o}:{uid:i,message:n,timestamp:o};firebase.chatDB.ref("messages/").push(c).then(function(){c=a?{message:a[1],type:"youtube",timestamp:o,photoURL:r,displayName:_}:{message:n,timestamp:o,photoURL:r,displayName:_},e.getGeoLocation(i,c)}),e.setState({message:""})}()}():T.a.push("/auth")}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"control"},d.a.createElement("input",{className:"form-control",type:"text",value:this.state.message,placeholder:this.getPlaceholder(),onChange:function(t){return e.changeSubject.next(t)},onKeyDown:function(t){return e.keyDownSubject.next(t)}}),d.a.createElement("button",{className:"btn",type:"button",title:"發送",onClick:this.SendMessage},d.a.createElement("i",{className:"fa fa-paper-plane"})),d.a.createElement("button",{className:"btn",type:"button",title:"清除",onClick:function(t){return e.clickSubject.next(t)}},d.a.createElement("i",{className:"fa fa-eraser"})))}}]),t}(m.Component));f.propTypes={clearMessage:m.PropTypes.func},function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(f,"Control","C:/Github/collect/src/components/miniChat/components/control.jsx")}()},337:function(e,t){},338:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(61),a=n.n(s),i=n(62),_=n.n(i),r=n(65),o=n.n(r),c=n(63),p=n.n(c),h=n(64),l=n.n(h),u=n(4),y=n.n(u),m=n(334),d=n(336),E=n(339),T=(n.n(E),function(e){function t(){var e,n,s,i;_.a(this,t);for(var r=arguments.length,o=Array(r),c=0;c<r;c++)o[c]=arguments[c];return n=s=p.a(this,(e=t.__proto__||a.a(t)).call.apply(e,[this].concat(o))),s.getUser=function(){var e;return(e=s).__getUser__REACT_HOT_LOADER__.apply(e,arguments)},s.handleClick=function(){var e;return(e=s).__handleClick__REACT_HOT_LOADER__.apply(e,arguments)},i=n,p.a(s,i)}return l.a(t,e),o.a(t,[{key:"componentDidMount",value:function(){this.refs.messageBlock.scrollTop=this.refs.messageBlockUl.clientHeight}},{key:"shouldComponentUpdate",value:function(e,t){return e.chat!==this.props.chat||e.miniChat!==this.props.miniChat||this.state!==t}},{key:"componentDidUpdate",value:function(){this.refs.messageBlock.scrollTop=this.refs.messageBlockUl.clientHeight}},{key:"componentWillUnmount",value:function(){firebase.chatDB.ref(".info/connected").off("value",this.connected),firebase.chatDB.ref("members").off("child_changed",this.userOnlineLog)}},{key:"__getUser__REACT_HOT_LOADER__",value:function(){return this.__getUser__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getUser__REACT_HOT_LOADER__",value:function(){return firebase.chatAH.currentUser}},{key:"__handleClick__REACT_HOT_LOADER__",value:function(){return this.__handleClick__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__handleClick__REACT_HOT_LOADER__",value:function(){this.props.toggleMinichat(this.props.chat.size)}},{key:"render",value:function(){var e=this.getUser()?this.getUser():{uid:null},t=this.props.miniChat.get("isShow"),n=this.props.chat.size-this.props.miniChat.get("count");return y.a.createElement("div",{id:"miniChat",style:this.props.miniChatStyle,className:t?"active":""},y.a.createElement("div",{id:"miniChatBox",className:"card"},y.a.createElement("button",{className:"card-header",ref:"miniChatHeader",onClick:this.handleClick},y.a.createElement("b",null,"多人聊天窗口",!t&&n?y.a.createElement("span",{className:"tag tag-danger"},n):null)),y.a.createElement("div",{className:"card-block",ref:"messageBlock"},y.a.createElement("ul",{ref:"messageBlockUl"},this.props.chat.map(function(t){return y.a.createElement(m.a,{key:t.timestamp,className:t.uid===e.uid?"clearfix messagesSelf":"clearfix messagesOther",photoURL:t.photoURL,displayName:t.displayName,message:t.message,type:t.type})})))),y.a.createElement(d.a,{clearMessage:this.props.clearMessage}))}}]),t}(u.Component));T.propTypes={chat:u.PropTypes.object.isRequired,clearMessage:u.PropTypes.func,toggleMinichat:u.PropTypes.func,miniChat:u.PropTypes.object.isRequired,miniChatStyle:u.PropTypes.object};var g=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(T,"Chat","C:/Github/collect/src/components/miniChat/miniChat.jsx")}(),T);t.a=g,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(g,"default","C:/Github/collect/src/components/miniChat/index.jsx")}()},339:function(e,t){},707:function(e,t,n){e.exports=n.p+"images/0000F.png"},708:function(e,t,n){e.exports=n.p+"images/0000S.png"},709:function(e,t,n){e.exports=n.p+"images/0001F.png"},710:function(e,t,n){e.exports=n.p+"images/0001S.png"},711:function(e,t,n){e.exports=n.p+"images/0002F.png"},712:function(e,t,n){e.exports=n.p+"images/0002S.png"},713:function(e,t,n){e.exports=n.p+"images/0003F.png"},714:function(e,t,n){e.exports=n.p+"images/0003S.png"},715:function(e,t,n){e.exports=n.p+"images/man.png"},716:function(e,t){},717:function(e,t){},718:function(e,t){},745:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(707),a=n.n(s),i=n(708),_=n.n(i),r={map:{index:0,name:"大地圖",first:a.a,second:_.a,width:1920,height:1280,in:[{x:472,y:544},{x:1344,y:512},{x:744,y:40},{x:20,y:1200}]},isMove:[{n:"largetree",x:896,y:392,w:64,h:64},{n:"stone",x:980,y:512,w:64,h:1,e:2},{n:"house",x:384,y:352,w:224,h:160},{n:"house",x:384,y:352,w:224,h:128},{n:"housedoor",x:504,y:480,w:1,h:32,cm:1,cmm:0},{n:"wood",x:508,y:524,w:64,h:18},{n:"fence",x:409,y:656,w:309,h:1},{n:"fence",x:788,y:656,w:243,h:1},{n:"fence",x:409,y:880,w:621,h:1},{n:"fence",x:409,y:656,w:4,h:224},{n:"fence",x:1028,y:656,w:4,h:224},{n:"bogy",x:578,y:760,w:32,h:1,e:0},{n:"man",x:810,y:518,w:32,h:1,e:1},{n:"水池",x:864,y:768,w:64,h:1},{n:"紅屋",x:1312,y:288,w:448,h:128},{n:"紅屋",x:1312,y:448,w:160,h:32},{n:"紅屋",x:1316,y:512,w:24,h:1},{n:"紅屋",x:1424,y:512,w:32,h:1},{n:"紅屋",x:1536,y:506,w:64,h:6},{n:"紅屋",x:1664,y:506,w:64,h:6},{n:"紅屋",x:1344,y:480,w:12,h:1,cm:2,cmm:0},{n:"柵欄",x:1230,y:170,w:610,h:1},{n:"柵欄",x:1230,y:608,w:76,h:1},{n:"柵欄",x:1408,y:608,w:434,h:1},{n:"柵欄",x:1230,y:170,w:1,h:416},{n:"柵欄",x:1840,y:170,w:1,h:416},{x:1503,y:1120,w:66,h:1},{x:1697,y:1088,w:63,h:1},{x:1312,y:1088,w:65,h:1},{x:960,y:1088,w:65,h:1},{x:766,y:1120,w:67,h:1},{x:1122,y:1120,w:62,h:1},{x:416,y:1120,w:63,h:1},{x:577,y:1088,w:63,h:1},{x:1,y:1088,w:222,h:0},{x:217,y:300,w:6,h:726},{x:130,y:1034,w:60,h:8},{x:98,y:1024,w:28,h:1},{x:194,y:1024,w:28,h:1},{x:88,y:14,w:8,h:1013},{x:1,y:1003,w:87,h:6},{x:314,y:204,w:387,h:20},{x:800,y:204,w:63,h:21},{x:94,y:12,w:577,h:18},{x:862,y:15,w:1059,h:17},{x:857,y:32,w:5,h:180},{x:7,y:1084,w:216,h:2},{x:223,y:322,w:96,h:3},{x:310,y:216,w:9,h:106},{x:799,y:253,w:0,h:21},{x:797,y:205,w:2,h:38},{x:702,y:205,w:4,h:38},{x:680,y:2,w:173,h:3},{x:5,y:1126,w:1,h:152}],npc:[{b:"http://dkbo.github.io/images/man.png",type:4,pX:1550,pY:800,aX:1152,aY:672,aW:600,aH:240,mX:50,mY:50,x:0,y:0,w:32,h:48,d:0,l:1,r:2,u:3,t:0,s:0,f:0,footSpeed:8,isR:!1,isU:!1,isD:!1,isL:!1,isM:!1,e:3}]},o=r,c=o,p=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"ISMOVE_0000","C:/Github/collect/src/constants/ismove/isMove_0000.jsx"),__REACT_HOT_LOADER__.register(o,"default","C:/Github/collect/src/constants/ismove/isMove_0000.jsx"))}(),n(709)),h=n.n(p),l=n(710),u=n.n(l),y={map:{index:1,name:"花草屋",first:h.a,second:u.a,width:960,height:640,in:[{x:472,y:580}]},isMove:[{n:"man",x:480,y:352,w:32,h:0,e:0},{n:"牆",x:448,y:640,w:64,h:0,cm:0,cmm:0},{n:"牆",x:32,y:0,w:0,h:640},{n:"牆",x:928,y:0,w:0,h:640},{n:"牆",x:32,y:32,w:928,h:0},{n:"牆",x:32,y:608,w:416,h:0},{n:"牆",x:512,y:608,w:416,h:0},{n:"花",x:128,y:64,w:32,h:0},{n:"花",x:128,y:224,w:32,h:0},{n:"花",x:128,y:384,w:32,h:0},{n:"花",x:800,y:64,w:32,h:0},{n:"花",x:800,y:224,w:32,h:0},{n:"花",x:800,y:384,w:32,h:0},{n:"石碑",x:224,y:160,w:32,h:0},{n:"石碑",x:224,y:320,w:32,h:0},{n:"石碑",x:704,y:160,w:32,h:0},{n:"石碑",x:704,y:320,w:32,h:0}],npc:[{b:"http://dkbo.github.io/images/man.png",type:0,pX:650,pY:500,aX:512,aY:416,aW:350,aH:140,mX:0,mY:0,x:0,y:0,w:32,h:48,d:0,l:1,r:2,u:3,t:0,s:0,f:0,footSpeed:8,isR:!1,isU:!1,isD:!1,isL:!1,isM:!1,e:1}]},m=y,d=m,E=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(y,"ISMOVE_0001","C:/Github/collect/src/constants/ismove/isMove_0001.jsx"),__REACT_HOT_LOADER__.register(m,"default","C:/Github/collect/src/constants/ismove/isMove_0001.jsx"))}(),n(711)),T=n.n(E),g=n(712),f=n.n(g),R={map:{index:2,name:"房屋(1F)",first:T.a,second:f.a,width:1440,height:960,in:[{x:48,y:896},{x:720,y:96}]},isMove:[{n:"雕像",x:33,y:93,w:32,h:3},{n:"雕像",x:642,y:94,w:28,h:3},{n:"鋼琴",x:309,y:185,w:55,h:5},{n:"桌子",x:133,y:320,w:86,h:22},{n:"桌子",x:454,y:320,w:84,h:22},{n:"牆壁",x:32,y:60,w:640,h:2},{n:"牆壁",x:128,y:734,w:2,h:223},{n:"牆壁",x:131,y:730,w:1276,h:4},{n:"牆壁",x:1406,y:349,w:3,h:380},{n:"牆壁",x:1119,y:352,w:289,h:32},{n:"牆壁",x:768,y:352,w:287,h:32},{n:"牆壁",x:800,y:58,w:607,h:6},{n:"牆壁",x:767,y:0,w:3,h:351},{n:"牆壁",x:703,y:5,w:2,h:379},{n:"牆壁",x:703,y:383,w:3,h:195},{n:"牆壁",x:353,y:544,w:340,h:32},{n:"牆壁",x:32,y:544,w:255,h:32},{n:"牆壁",x:30,y:62,w:1,h:895},{n:"牆壁",x:672,y:61,w:4,h:451},{n:"樓梯",x:713,y:6,w:45,h:7,cm:3,cmm:0},{n:"人",x:813,y:510,w:26,h:4,e:0},{n:"牆壁",x:795,y:60,w:6,h:257},{n:"牆壁",x:1408,y:60,w:2,h:261},{n:"櫥櫃",x:801,y:93,w:609,h:2},{n:"櫥櫃",x:800,y:192,w:128,h:1},{n:"櫥櫃",x:992,y:192,w:128,h:1},{n:"櫥櫃",x:1184,y:192,w:128,h:1},{n:"櫥櫃",x:800,y:288,w:128,h:1},{n:"櫥櫃",x:992,y:288,w:128,h:1},{n:"櫥櫃",x:1184,y:288,w:128,h:1},{n:"門口",x:38,y:952,w:78,h:7,cm:0,cmm:1}],npc:[{b:"http://dkbo.github.io/images/man.png",type:0,pX:128,pY:224,aX:64,aY:128,aW:188,aH:128,mX:0,mY:0,x:0,y:0,w:32,h:48,d:0,l:1,r:2,u:3,t:0,s:0,f:0,footSpeed:8,isR:!1,isU:!1,isD:!1,isL:!1,isM:!1,e:1},{b:"http://dkbo.github.io/images/man.png",type:0,pX:504,pY:224,aX:384,aY:128,aW:224,aH:128,mX:0,mY:0,x:0,y:0,w:32,h:48,d:0,l:1,r:2,u:3,t:0,s:0,f:0,footSpeed:8,isR:!1,isU:!1,isD:!1,isL:!1,isM:!1,e:2},{b:"http://dkbo.github.io/images/man.png",type:0,pX:428,pY:424,aX:64,aY:352,aW:564,aH:128,mX:0,mY:0,x:0,y:0,w:32,h:48,d:0,l:1,r:2,u:3,t:0,s:0,f:0,footSpeed:8,isR:!1,isU:!1,isD:!1,isL:!1,isM:!1,e:3}]},A=R,w=A,x=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(R,"ISMOVE_0002","C:/Github/collect/src/constants/ismove/isMove_0002.jsx"),__REACT_HOT_LOADER__.register(A,"default","C:/Github/collect/src/constants/ismove/isMove_0002.jsx"))}(),n(713)),O=n.n(x),v=n(714),C=n.n(v),D={map:{index:3,name:"房屋(2F)",first:O.a,second:C.a,width:1440,height:960,in:[{x:672,y:160}]},isMove:[{n:"牆壁",x:1120,y:352,w:289,h:32},{n:"牆壁",x:768,y:352,w:288,h:32},{n:"牆壁",x:800,y:64,w:607,h:1},{n:"牆壁",x:800,y:64,w:1,h:257},{n:"牆壁",x:1408,y:60,w:2,h:261},{x:0,y:0,w:0,h:0},{x:0,y:0,w:0,h:0},{x:33,y:64,w:447,h:1},{x:32,y:63,w:1,h:883},{x:32,y:352,w:449,h:33},{x:800,y:512,w:256,h:32},{x:1120,y:512,w:288,h:33},{x:800,y:541,w:2,h:162},{x:1406,y:545,w:2,h:160},{x:0,y:0,w:0,h:0},{x:125,y:733,w:3,h:166},{x:32,y:894,w:94,h:1},{x:768,y:512,w:3,h:223},{x:125,y:730,w:1310,h:5},{x:480,y:384,w:1,h:256},{x:0,y:0,w:0,h:0},{x:512,y:64,w:1,h:192},{x:768,y:64,w:2,h:227},{x:608,y:288,w:159,h:32},{x:480,y:64,w:2,h:192},{x:512,y:350,w:0,h:290},{x:512,y:352,w:1,h:288},{x:1406,y:383,w:3,h:98},{x:576,y:96,w:32,h:2,e:0},{x:679,y:221,w:52,h:1,cm:2,cmm:1},{x:513,y:64,w:257,h:1},{x:481,y:253,w:32,h:3},{x:481,y:636,w:32,h:3},{x:664,y:224,w:80,h:1},{x:0,y:0,w:0,h:0},{x:665,y:192,w:1,h:32},{x:741,y:192,w:1,h:32}]},b=D,L=b,H=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(D,"ISMOVE_0003","C:/Github/collect/src/constants/ismove/isMove_0003.jsx"),__REACT_HOT_LOADER__.register(b,"default","C:/Github/collect/src/constants/ismove/isMove_0003.jsx"))}(),[c,d,w,L]),k=H,M=k,S=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(H,"isMoveObject","C:/Github/collect/src/constants/ismove/index.jsx"),__REACT_HOT_LOADER__.register(k,"default","C:/Github/collect/src/constants/ismove/index.jsx"))}(),n(4)),P=n.n(S),N=[{name:"稻草人",text:[".","..","...","....",".....","......"]},{name:"哆拉樹",text:["大家好!","我被作者配置在樹下所以我叫做哆拉樹。","作者說以前有玩過一些用 RPG 製作大師所製成的遊戲，但是從來沒有親自開發過。","現在作者想做一份線上履歷來介紹自己，以 RPG 製作大師的風格來實作!","因作者並不會美編，所以場景布置的不好看也請多多見諒。",P.a.createElement("span",null," 還不知道如何操作的話請按 ",P.a.createElement("kbd",null," ESC ")),"如果你是行動裝置的話請觸碰左上角的選單按鈕。"]},{name:"古文碑",text:[P.a.createElement("span",null," 作者本名叫 ",P.a.createElement("mark",null," 盧宏寶 ")," 在家排名老二，畢業於高雄市正修科技大學電機工程系， 在網路世界中暱稱為 ",P.a.createElement("mark",null,"DKBO")," "),"英語聽、說很差讀，美感不好，正在努力中。"]}],U=N,j=U,G=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(N,"MESSAGE_0000","C:/Github/collect/src/constants/message/message_0000.jsx"),__REACT_HOT_LOADER__.register(U,"default","C:/Github/collect/src/constants/message/message_0000.jsx"))}(),[{name:"哆拉花",text:["這屋子種了不少花!","下班之後，看看一下花花草草能適度的釋壓。"]},{name:"哆拉花角",text:["我是第一個會走的 NPC 唷"]}]),I=G,F=I,q=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(G,"MESSAGE_0001","C:/Github/collect/src/constants/message/message_0001.jsx"),__REACT_HOT_LOADER__.register(I,"default","C:/Github/collect/src/constants/message/message_0001.jsx"))}(),n(4)),K=n.n(q),X=[{name:"哆拉工",text:["用老闆做的編輯器隔間二樓，雖然比以前快多了!但還是很累人呢。","過陣子外面也要重整一下了"]},{name:"哆拉客",text:[K.a.createElement("span",null," 據說這個世界有著 ",K.a.createElement("a",{href:"https://zh.wikipedia.org/wiki/%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BD%91%E9%A1%B5%E8%AE%BE%E8%AE%A1",trage:"_blank"}," RWD ")," 的特性，可以隨意縮小放大。"),"想把我變大隻一點的話就縮放一下瀏覽器吧!整個畫面都會跟著變大唷!"]},{name:"哆拉喀",text:["老闆說想要把這世界改造成是網頁抑是遊戲，真不懂老闆在想甚麼。","像我這樣每天走來走去的倒是輕鬆自在呀!"]},{name:"哆拉剋",text:["這個世界目前非常的和平，沒有任何打鬥的痕跡。治安也是非常的好。"]}],Y=X,B=Y,W=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(X,"MESSAGE_0002","C:/Github/collect/src/constants/message/message_0002.jsx"),__REACT_HOT_LOADER__.register(Y,"default","C:/Github/collect/src/constants/message/message_0002.jsx"))}(),[{name:"哆拉空",text:["2樓今晚隔間好嚕，之後就可以慢慢擺設了。"]}]),z=W,V=z,J=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(W,"MESSAGE_0003","C:/Github/collect/src/constants/message/message_0003.jsx"),__REACT_HOT_LOADER__.register(z,"default","C:/Github/collect/src/constants/message/message_0003.jsx"))}(),[j,F,B,V]),Q=J,Z=Q,$=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(J,"messageObject","C:/Github/collect/src/constants/message/index.jsx"),__REACT_HOT_LOADER__.register(Q,"default","C:/Github/collect/src/constants/message/index.jsx"))}(),n(61)),ee=n.n($),te=n(62),ne=n.n(te),se=n(65),ae=n.n(se),ie=n(63),_e=n.n(ie),re=n(64),oe=n.n(re),ce=n(4),pe=n.n(ce),he=n(715),le=n.n(he),ue=function(e){function t(){var e,n,s,a;ne.a(this,t);for(var i=arguments.length,_=Array(i),r=0;r<i;r++)_[r]=arguments[r];return n=s=_e.a(this,(e=t.__proto__||ee.a(t)).call.apply(e,[this].concat(_))),s.getPlayerClassName=function(){var e;return(e=s).__getPlayerClassName__REACT_HOT_LOADER__.apply(e,arguments)},s.isDraw=function(){var e;return(e=s).__isDraw__REACT_HOT_LOADER__.apply(e,arguments)},s.moveAnimate=function(){var e;return(e=s).__moveAnimate__REACT_HOT_LOADER__.apply(e,arguments)},s.handleKeyDown=function(){var e;return(e=s).__handleKeyDown__REACT_HOT_LOADER__.apply(e,arguments)},s.handleKeyUp=function(){var e;return(e=s).__handleKeyUp__REACT_HOT_LOADER__.apply(e,arguments)},s.handleResize=function(){var e;return(e=s).__handleResize__REACT_HOT_LOADER__.apply(e,arguments)},a=n,_e.a(s,a)}return oe.a(t,e),ae.a(t,[{key:"componentWillMount",value:function(){this.resize=Rx.Observable.fromEvent(window,"resize").debounceTime(300).do(this.handleResize),this.keyUp=Rx.Observable.fromEvent(window,"keyup").do(this.handleKeyUp),this.keyDown=Rx.Observable.fromEvent(window,"keydown").do(this.handleKeyDown),this.touchStart=Rx.Observable.fromEvent(window,"touchstart").do(this.moveAnimate),this.subscribe=Rx.Observable.merge(this.keyUp,this.keyDown,this.touchStart,this.resize).subscribe()}},{key:"componentDidMount",value:function(){var e=this;this.canvas=this.refs.player,this.player=this.canvas.getContext("2d"),this.player.nX=32,this.player.nY=48,this.img=new Image,this.img.onload=function(){e.handleResize()},this.img.src=le.a,this.af=0,this.props.rAF()(this.isDraw),this.drawPlayer()}},{key:"componentDidUpdate",value:function(){this.drawPlayer()}},{key:"componentWillUnmount",value:function(){this.subscribe.unsubscribe(),this.props.cAF()(this.aframe)}},{key:"__getPlayerClassName__REACT_HOT_LOADER__",value:function(){return this.__getPlayerClassName__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getPlayerClassName__REACT_HOT_LOADER__",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"player";return this.props.sence.get("isTransSence")?e+" x-hide":e}},{key:"__isDraw__REACT_HOT_LOADER__",value:function(){return this.__isDraw__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__isDraw__REACT_HOT_LOADER__",value:function(){if(!this.props.sence.get("isTransSence")){var e=0,t=0,n=!1,s=!1,a=this.props.player,i=a.px,_=a.py,r=a.sx,o=a.sy,c=a.spx,p=a.spy,h=this.props.sence.get("msx"),l=this.props.sence.get("msy"),u=M[this.props.sence.get("mapId")].map.width,y=M[this.props.sence.get("mapId")].map.height,m=window.innerHeight,d=window.innerWidth,E=this.props.player,T=E.s,g=E.left,f=E.up,R=E.down,A=E.right,w=this.props.sence.get("mDw"),x=this.props.sence.get("mLf"),O=this.props.sence.get("mRf"),v=this.props.sence.get("mUp"),C=this.player,D=C.nX,b=C.nY;if(g&&!A)e=-T,o=b,c+e<x?(h>0&&(h+=e),c+e<=0?c=0:0===h&&(c+=e)):c+=e,n=!0;else if(A&&!g){e=T,o=2*b;var L=u-d;c+e>O?h>=L?c<d-D&&(c+=e):h+=e:c+=e,n=!0}if(f&&!R)t=-T,o=3*b,p+t<v?(l>0&&(l+=t),p+t<=0?p=0:0===l&&(p+=t)):p+=t,s=!0;else if(R&&!f){t=T,o=0;var H=y-m;p+t>w?l>=H?p<m-b&&(p+=t):l+=t:p+=t,s=!0}(n||s)&&(l=l<0?0:l,h=h<0?0:h,i=d>u?c-(d-u)/2:h+c,_=m>y?p-(m-y)/2:l+p,this.isTransSence(i,_)||(this.af=this.af+1===D?0:this.af+=1,r=parseInt(this.af/(D/4),10)*D,this.isMove(i,_)?this.drawSenceAndPlayer({px:i,py:_,sx:r,sy:o,spx:c,spy:p},{msx:h,msy:l}):this.isMove(i,this.props.player.py)?this.drawSenceAndPlayer({px:i,py:this.props.player.py,sx:r,sy:o,spx:c,spy:this.props.player.spy},{msx:h,msy:this.props.sence.get("msy")}):this.isMove(this.props.player.px,_)?this.drawSenceAndPlayer({px:this.props.player.px,py:_,sx:r,sy:o,spx:this.props.player.spx,spy:p},{msx:this.props.sence.get("msx"),msy:l}):this.drawSenceAndPlayer({px:this.props.player.px,py:this.props.player.py,sx:r,sy:o,spx:this.props.player.spx,spy:this.props.player.spy},{msx:this.props.sence.get("msx"),msy:this.props.sence.get("msy")})),this.props.npc.isChat&&this.closeChat())}this.aframe=this.props.rAF()(this.isDraw)}},{key:"drawSenceAndPlayer",value:function(e,t){this.props.pos(e),this.props.sen(t)}},{key:"isMove",value:function(e,t){var n=this.player,s=n.nX,a=n.nY,i=!0;return M[this.props.sence.get("mapId")].isMove.forEach(function(n){var _=e+s>=n.x,r=e<=n.x+n.w,o=t+a>=n.y,c=t<=n.y+n.h;_&&r&&o&&c&&(i=!1)}),i}},{key:"isTransSence",value:function(e,t){var n=this,s=this.player,a=s.nX,i=s.nY,_=!1;return M[this.props.sence.get("mapId")].isMove.forEach(function(s){var r=e+a>=s.x,o=e<=s.x+s.w,c=t+i>=s.y,p=t<=s.y+s.h;r&&o&&c&&p&&s.cm>=0&&(_=!0,n.props.sen({mapId:s.cm,isTransSence:_}),n.props.pos({px:M[s.cm].map.in[s.cmm].x,py:M[s.cm].map.in[s.cmm].y}),n.handleResize())}),_}},{key:"__moveAnimate__REACT_HOT_LOADER__",value:function(){return this.__moveAnimate__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__moveAnimate__REACT_HOT_LOADER__",value:function(){var e=this.props.player,t=e.sy,n=e.s;switch(t){case 0:this.isMessage(0,n);break;case 48:this.isMessage(-n,0);break;case 96:this.isMessage(n,0);break;case 144:this.isMessage(0,-n)}}},{key:"isMessage",value:function(e,t){var n=this,s=this.props.player,a=s.px,i=s.py,_=this.player,r=_.nX,o=_.nY;M[this.props.sence.get("mapId")].isMove.forEach(function(s){var _=a+r+e>=s.x,c=a+e<=s.x+s.w,p=i+o+t>=s.y,h=i+t<=s.y+s.h;if(_&&c&&p&&h&&s.e>=0){var l=Z[n.props.sence.get("mapId")][s.e];if(l.text){var u=n.props.npc.messageCount?n.props.npc.messageCount+1:1,y=l.name,m=l.text.length>=u?l.text[u-1]:l.text[u-2],d=l.text.length>=u;u=l.text.length>=u?u:0,n.props.mes({messageCount:u,npcName:y,npcMessage:m,isChat:d})}}})}},{key:"closeChat",value:function(){var e=this.props.npc,t=e.npcName,n=e.npcMessage;this.props.mes({messageCount:0,npcName:t,npcMessage:n,isChat:!1})}},{key:"drawPlayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.player,t=e.spx,n=e.spy,s=e.sx,a=e.sy,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.player,_=i.nX,r=i.nY;this.player.clearRect(0,0,window.innerWidth,window.innerHeight),this.player.drawImage(this.img,s,a,_,r,t,n,_,r)}},{key:"__handleKeyDown__REACT_HOT_LOADER__",value:function(){return this.__handleKeyDown__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__handleKeyDown__REACT_HOT_LOADER__",value:function(e){switch(e.keyCode){case 37:this.isKeyDown("left");break;case 38:this.isKeyDown("up");break;case 39:this.isKeyDown("right");break;case 40:this.isKeyDown("down");break;case 32:this.moveAnimate()}}},{key:"isKeyDown",value:function(e){this.props.player[e]||this.props.way(e,!0)}},{key:"__handleKeyUp__REACT_HOT_LOADER__",value:function(){return this.__handleKeyUp__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__handleKeyUp__REACT_HOT_LOADER__",value:function(e){switch(e.keyCode){case 37:this.isKeyUp("left");break;case 38:this.isKeyUp("up");break;case 39:this.isKeyUp("right");break;case 40:this.isKeyUp("down")}}},{key:"isKeyUp",value:function(e){this.props.player[e]&&this.props.way(e,!1)}},{key:"__handleResize__REACT_HOT_LOADER__",value:function(){return this.__handleResize__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__handleResize__REACT_HOT_LOADER__",value:function(){var e=this.player,t=e.nY,n=e.nX,s=this.props.player,a=s.px,i=s.py,_=window.innerHeight,r=window.innerWidth,o=_/4,c=r/4,p=M[this.props.sence.get("mapId")].map.width,h=M[this.props.sence.get("mapId")].map.height,l=parseInt(_/2-o,10)-parseInt(_/2-o,10)%4,u=parseInt(_/2+(o-t),10)-parseInt(_/2+(o-t),10)%4,y=parseInt(r/2-c,10)-parseInt(r/2-c,10)%4,m=parseInt(r/2+(c-n),10)-parseInt(r/2+(c-n),10)%4,d=void 0;d=r>p||a<=m?0:a>=p-n||a-m>p-r?p-r:a-m;var E=void 0;E=_>h||i<=u?0:i>=h-t||i-u>h-_?h-_:i-u;var T=void 0;T=r>p?a+(r-p)/2:a<=m?a:a>=p-n||a-m>p-r?a-d:m;var g=void 0;g=_>h?i+(_-h)/2:i<=u?i:i>=h-t||i-u>h-_?i-E:u,this.drawSenceAndPlayer({spx:T,spy:g},{mUp:l,mDw:u,mLf:y,mRf:m,msx:d,msy:E})}},{key:"render",value:function(){return pe.a.createElement("div",null,pe.a.createElement("canvas",{className:this.getPlayerClassName(),ref:"player",width:window.innerWidth>this.width?this.width:window.innerWidth,height:window.innerHeight>this.height?this.height:window.innerHeight}))}}]),t}(ce.Component);ue.propTypes={npc:ce.PropTypes.shape({isChat:ce.PropTypes.bool,npcName:ce.PropTypes.string,messageCount:ce.PropTypes.number,npcMessage:ce.PropTypes.any}).isRequired,player:ce.PropTypes.shape({s:ce.PropTypes.number,px:ce.PropTypes.number,py:ce.PropTypes.number,sx:ce.PropTypes.number,sy:ce.PropTypes.number,spx:ce.PropTypes.number,spy:ce.PropTypes.number,left:ce.PropTypes.bool,right:ce.PropTypes.bool,up:ce.PropTypes.bool,down:ce.PropTypes.bool}).isRequired,sence:ce.PropTypes.any,pos:ce.PropTypes.func.isRequired,sen:ce.PropTypes.func.isRequired,mes:ce.PropTypes.func.isRequired,way:ce.PropTypes.func.isRequired,rAF:ce.PropTypes.func.isRequired,cAF:ce.PropTypes.func.isRequired};var ye=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(ue,"Player","C:/Github/collect/src/page/rpg/components/player.jsx")}(),n(61)),me=n.n(ye),de=n(62),Ee=n.n(de),Te=n(65),ge=n.n(Te),fe=n(63),Re=n.n(fe),Ae=n(64),we=n.n(Ae),xe=n(4),Oe=n.n(xe),ve=function(e){function t(e){Ee.a(this,t);var n=Re.a(this,(t.__proto__||me.a(t)).call(this,e));return n.getSenceClassName=function(){return n.__getSenceClassName__REACT_HOT_LOADER__.apply(n,arguments)},n.width=M[e.sence.get("mapId")].map.width,n.height=M[e.sence.get("mapId")].map.height,n.img=new Image,n}return we.a(t,e),ge.a(t,[{key:"componentDidMount",value:function(){this.canvas=this.refs.sence,this.sence=this.canvas.getContext("2d"),this.senceChange()}},{key:"shouldComponentUpdate",value:function(e){return this.props.sence.get("mapId")!==e.sence.get("mapId")&&this.senceChange(e),this.props.sence!==e.sence}},{key:"componentDidUpdate",value:function(){this.drawSence()}},{key:"__getSenceClassName__REACT_HOT_LOADER__",value:function(){return this.__getSenceClassName__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getSenceClassName__REACT_HOT_LOADER__",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sence";return this.props.sence.get("isTransSence")?e+" x-hide":e}},{key:"drawSence",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.sence.get("msx"),n=e.sence.get("msy");this.sence.clearRect(0,0,window.innerWidth,window.innerHeight),this.sence.drawImage(this.img,t,n,this.width,this.height,0,0,this.width,this.height)}},{key:"senceChange",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.width=M[t.sence.get("mapId")].map.width,this.height=M[t.sence.get("mapId")].map.height,this.img.onload=function(){e.drawSence(),t.sence.get("isTransSence")&&setTimeout(function(){return t.sen({isTransSence:!1})},1e3)},this.img.src=M[t.sence.get("mapId")].map[t.senceImg]}},{key:"render",value:function(){return Oe.a.createElement("div",null,Oe.a.createElement("canvas",{className:this.getSenceClassName(),ref:"sence",width:Math.min(window.innerWidth,this.width),height:Math.min(window.innerHeight,this.height)}))}}]),t}(xe.Component);ve.propTypes={sence:xe.PropTypes.object.isRequired};var Ce=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(ve,"Sence","C:/Github/collect/src/page/rpg/components/sence.jsx")}(),n(110)),De=n.n(Ce),be=n(61),Le=n.n(be),He=n(62),ke=n.n(He),Me=n(65),Se=n.n(Me),Pe=n(63),Ne=n.n(Pe),Ue=n(64),je=n.n(Ue),Ge=n(4),Ie=n.n(Ge),Fe=n(716),qe=(n.n(Fe),function(e){function t(){return ke.a(this,t),Ne.a(this,(t.__proto__||Le.a(t)).apply(this,arguments))}return je.a(t,e),Se.a(t,[{key:"shouldComponentUpdate",value:function(e){return e.npc.messageCount!==this.props.npc.messageCount}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.npc,t=e.npcName,n=e.npcMessage;return Ie.a.createElement("div",{id:"rpgChatBox",ref:"rpgChatBox"},t," : ","object"===(void 0===n?"undefined":De.a(n))?n.toJS():n)}}]),t}(Ge.Component));qe.propTypes={npc:Ge.PropTypes.object.isRequired};var Ke=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(qe,"Chat","C:/Github/collect/src/page/rpg/components/chat.jsx")}(),n(61)),Xe=n.n(Ke),Ye=n(62),Be=n.n(Ye),We=n(65),ze=n.n(We),Ve=n(63),Je=n.n(Ve),Qe=n(64),Ze=n.n(Qe),$e=n(4),et=n.n($e),tt=n(717),nt=(n.n(tt),function(e){function t(){return Be.a(this,t),Je.a(this,(t.__proto__||Xe.a(t)).apply(this,arguments))}return Ze.a(t,e),ze.a(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return et.a.createElement("div",{id:"loadBox"},et.a.createElement("div",{className:"loader"},et.a.createElement("div",{className:"loader-overlay"}),et.a.createElement("div",{className:"loader-cogs"},et.a.createElement("div",{className:"loader-cogs-top"},et.a.createElement("div",{className:"top-part"}),et.a.createElement("div",{className:"top-part"}),et.a.createElement("div",{className:"top-part"}),et.a.createElement("div",{className:"top-hole"})),et.a.createElement("div",{className:"loader-cogs-left"},et.a.createElement("div",{className:"left-part"}),et.a.createElement("div",{className:"left-part"}),et.a.createElement("div",{className:"left-part"}),et.a.createElement("div",{className:"left-hole"})),et.a.createElement("div",{className:"loader-cogs-bottom"},et.a.createElement("div",{className:"bottom-part"}),et.a.createElement("div",{className:"bottom-part"}),et.a.createElement("div",{className:"bottom-part"}),et.a.createElement("div",{className:"bottom-hole"})),et.a.createElement("p",null,this.props.loadText))))}}]),t}($e.Component));nt.propTypes={loadText:$e.PropTypes.string};var st=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(nt,"Loading","C:/Github/collect/src/components/loading/loading.jsx")}(),nt),at=st,it=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(st,"default","C:/Github/collect/src/components/loading/index.jsx")}(),n(38)),_t=n.n(it),rt=n(61),ot=n.n(rt),ct=n(62),pt=n.n(ct),ht=n(65),lt=n.n(ht),ut=n(63),yt=n.n(ut),mt=n(64),dt=n.n(mt),Et=n(4),Tt=n.n(Et),gt=n(338),ft=n(718),Rt=(n.n(ft),function(e){function t(){var e,n,s,a;pt.a(this,t);for(var i=arguments.length,_=Array(i),r=0;r<i;r++)_[r]=arguments[r];return n=s=yt.a(this,(e=t.__proto__||ot.a(t)).call.apply(e,[this].concat(_))),s.getTouchPos=function(){var e;return(e=s).__getTouchPos__REACT_HOT_LOADER__.apply(e,arguments)},s.requestAFrame=function(){var e;return(e=s).__requestAFrame__REACT_HOT_LOADER__.apply(e,arguments)},s.cancelAFrame=function(){var e;return(e=s).__cancelAFrame__REACT_HOT_LOADER__.apply(e,arguments)},s.handleTouchMove=function(){var e;return(e=s).__handleTouchMove__REACT_HOT_LOADER__.apply(e,arguments)},s.handleTouchEnd=function(){var e;return(e=s).__handleTouchEnd__REACT_HOT_LOADER__.apply(e,arguments)},a=n,yt.a(s,a)}return dt.a(t,e),lt.a(t,[{key:"componentWillMount",value:function(){var e=this,t=Rx.Observable.fromEvent(document,"touchstart"),n=Rx.Observable.fromEvent(document,"touchmove"),s=Rx.Observable.fromEvent(document,"touchend").map(function(){return e.handleTouchEnd()});this.move=t.concatMap(function(){return n.takeUntil(s)}).withLatestFrom(t,function(e,t){return e.preventDefault(),{move:e,start:t}}).subscribe(this.handleTouchMove)}},{key:"componentDidMount",value:function(){document.oncontextmenu=function(){return!1}}},{key:"componentWillUnmount",value:function(){document.oncontextmenu=function(){return!0},this.move.unsubscribe()}},{key:"__getTouchPos__REACT_HOT_LOADER__",value:function(){return this.__getTouchPos__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getTouchPos__REACT_HOT_LOADER__",value:function(e){return{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}}},{key:"__requestAFrame__REACT_HOT_LOADER__",value:function(){return this.__requestAFrame__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__requestAFrame__REACT_HOT_LOADER__",value:function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}},{key:"__cancelAFrame__REACT_HOT_LOADER__",value:function(){return this.__cancelAFrame__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__cancelAFrame__REACT_HOT_LOADER__",value:function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.clearTimeout}},{key:"__handleTouchMove__REACT_HOT_LOADER__",value:function(){return this.__handleTouchMove__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__handleTouchMove__REACT_HOT_LOADER__",value:function(e){var t=e.move,n=e.start,s=this.getTouchPos(t),a=this.getTouchPos(n),i=s.x-a.x,_=s.y-a.y;i<-30?this.isTouchStart("left"):this.isTouchEnd("left"),i>30?this.isTouchStart("right"):this.isTouchEnd("right"),_<-30?this.isTouchStart("up"):this.isTouchEnd("up"),_>30?this.isTouchStart("down"):this.isTouchEnd("down")}},{key:"__handleTouchEnd__REACT_HOT_LOADER__",value:function(){return this.__handleTouchEnd__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__handleTouchEnd__REACT_HOT_LOADER__",value:function(){this.isTouchEnd("down"),this.isTouchEnd("up"),this.isTouchEnd("right"),this.isTouchEnd("left")}},{key:"isTouchEnd",value:function(e){this.props.player[e]&&this.props.way(e,!1)}},{key:"isTouchStart",value:function(e){this.props.player[e]||this.props.way(e,!0)}},{key:"render",value:function(){return Tt.a.createElement("div",{id:"rpg"},this.props.sence.get("isTransSence")?Tt.a.createElement(at,{loadText:"載入中請稍後"}):null,Tt.a.createElement(ve,_t.a({},this.props,{senceImg:"second"})),Tt.a.createElement(ue,_t.a({},this.props,{rAF:this.requestAFrame,cAF:this.cancelAFrame})),Tt.a.createElement(ve,_t.a({},this.props,{senceImg:"first"})),this.props.npc.isChat?Tt.a.createElement(qe,{npc:this.props.npc}):null,Tt.a.createElement(gt.a,_t.a({},this.props,{miniChatStyle:{left:0}})))}}]),t}(Et.Component));Rt.propTypes={sence:Et.PropTypes.any,npc:Et.PropTypes.object,way:Et.PropTypes.func,player:Et.PropTypes.object};var At=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Rt,"Rpg","C:/Github/collect/src/page/rpg/rpg.jsx")}(),Rt);t.default=At,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(At,"default","C:/Github/collect/src/page/rpg/index.jsx")}()}});